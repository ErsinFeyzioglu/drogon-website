{"parents": [{"link": "../index-en/", "title": "English documentation"}], "prev": {"link": "../Configuration-File-en/", "title": "Configuration File"}, "next": {"link": "../AOP-Aspect-Oriented-Programming-en/", "title": "AOP Aspect Oriented Programming"}, "title": "drogon_ctl Command", "meta": {}, "body": "<div class=\"section\" id=\"drogon-ctl-command\">\n<h1>drogon_ctl Command<a class=\"headerlink\" href=\"#drogon-ctl-command\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>After the Drogon framework is compiled and installed, a command line program <em>drogon_ctl</em> is also installed in the system, for convenience, also installed an identical copy dg_ctl. Users can choose according to their preferences.</p>\n<p>The main function of the program is to make it easy for users to create various drogon project files. Use the <em>dg_ctl help</em> command to see the functions it supports, as follows:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl <span class=\"nb\">help</span>\nusage: drogon_ctl &lt;command&gt; <span class=\"o\">[</span>&lt;args&gt;<span class=\"o\">]</span>\ncommands list:\ncreate                  create some <span class=\"nb\">source</span> files<span class=\"o\">(</span>Use <span class=\"s1\">&#39;drogon_ctl help create&#39;</span> <span class=\"k\">for</span> more information<span class=\"o\">)</span>\n<span class=\"nb\">help</span>                    display this message\nversion                 display version of this tool\npress                   Do stress testing<span class=\"o\">(</span>Use <span class=\"s1\">&#39;drogon_ctl help press&#39;</span> <span class=\"k\">for</span> more information<span class=\"o\">)</span>\n</pre></div>\n</div>\n<div class=\"section\" id=\"version-subcommand\">\n<h2>Version subcommand<a class=\"headerlink\" href=\"#version-subcommand\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The <em>version</em> subcommand is used to print the drogon version currently installed on the system, as follows:</p>\n<blockquote>\n<div><div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>     _\n  __<span class=\"p\">|</span> <span class=\"p\">|</span>_ __ ___   __ _  ___  _ __\n / _<span class=\"sb\">`</span> <span class=\"p\">|</span> <span class=\"s1\">&#39;__/ _ \\ / _` |/ _ \\| &#39;</span>_ <span class=\"se\">\\</span>\n<span class=\"p\">|</span> <span class=\"o\">(</span>_<span class=\"p\">|</span> <span class=\"p\">|</span> <span class=\"p\">|</span> <span class=\"p\">|</span> <span class=\"o\">(</span>_<span class=\"o\">)</span> <span class=\"p\">|</span> <span class=\"o\">(</span>_<span class=\"p\">|</span> <span class=\"p\">|</span> <span class=\"o\">(</span>_<span class=\"o\">)</span> <span class=\"p\">|</span> <span class=\"p\">|</span> <span class=\"p\">|</span> <span class=\"p\">|</span>\n <span class=\"se\">\\_</span>_,_<span class=\"p\">|</span>_<span class=\"p\">|</span>  <span class=\"se\">\\_</span>__/ <span class=\"se\">\\_</span>_, <span class=\"p\">|</span><span class=\"se\">\\_</span>__/<span class=\"p\">|</span>_<span class=\"p\">|</span> <span class=\"p\">|</span>_<span class=\"p\">|</span>\n                  <span class=\"p\">|</span>___/\ndrogon ctl tools\nversion:0.9.30.771\ngit commit:d4710d3da7ca9e73b881cbae3149c3a570da8de4\ncompile config:-O3 -DNDEBUG -Wall -std<span class=\"o\">=</span>c++17 -I/root/drogon/trantor -I/root/drogon/lib/inc -I/root/drogon/orm_lib/inc -I/usr/local/include -I/usr/include/uuid -I/usr/include -I/usr/include/mysql\n</pre></div>\n</div>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"create-sub-command\">\n<h2>Create sub command<a class=\"headerlink\" href=\"#create-sub-command\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The <em>create</em> subcommand is used to create various objects. It is currently the main function of drogon_ctl. Use the <em>dg_ctl help create</em> command to print detailed help for this command, as follows:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl <span class=\"nb\">help</span> create\n\nUse create <span class=\"nb\">command</span> to create some <span class=\"nb\">source</span> files of drogon webapp\n\nUsage:drogon_ctl create &lt;view<span class=\"p\">|</span>controller<span class=\"p\">|</span>filter<span class=\"p\">|</span>project<span class=\"p\">|</span>model&gt; <span class=\"o\">[</span>-options<span class=\"o\">]</span> &lt;object name&gt;\n\ndrogon_ctl create view &lt;csp file name&gt; //create HttpView <span class=\"nb\">source</span> files from csp file\n\ndrogon_ctl create controller <span class=\"o\">[</span>-s<span class=\"o\">]</span> &lt;<span class=\"o\">[</span>namespace::<span class=\"o\">]</span>class_name&gt; //create HttpSimpleController <span class=\"nb\">source</span> files\n\ndrogon_ctl create controller -h &lt;<span class=\"o\">[</span>namespace::<span class=\"o\">]</span>class_name&gt; //create HttpController <span class=\"nb\">source</span> files\n\ndrogon_ctl create controller -w &lt;<span class=\"o\">[</span>namespace::<span class=\"o\">]</span>class_name&gt; //create WebSocketController <span class=\"nb\">source</span> files\n\ndrogon_ctl create filter &lt;<span class=\"o\">[</span>namespace::<span class=\"o\">]</span>class_name&gt; //create a filter named class_name\n\ndrogon_ctl create project &lt;project_name&gt; //create a project named project_name\n\ndrogon_ctl create model &lt;model_path&gt; //create model classes in model_path\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"view-creation\">\n<h2>View creation<a class=\"headerlink\" href=\"#view-creation\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The <em>dg_ctl create view</em> command is used to generate source files from csp files, see the View section. In general, this command does not need to be used directly. It is better practice to configure the cmake file to executed this command automatically. The command example is as follows, assuming the csp file is <em>UsersList.csp</em>.</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl create view UsersList.csp\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"controller-creation\">\n<h2>Controller creation<a class=\"headerlink\" href=\"#controller-creation\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The <em>dg_ctl create controller</em> command is used to help the user create the controller\u2019s source files. The three controllers currently supported by drogon can be created by this command.</p>\n<blockquote>\n<div><ul>\n<li><p class=\"first\">The command to create an HttpSimpleController is as follows:</p>\n<blockquote>\n<div><div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl create controller SimpleControllerTest\ndg_ctl create controller webapp::v1::SimpleControllerTest\n</pre></div>\n</div>\n</div></blockquote>\n</li>\n</ul>\n</div></blockquote>\n<p>The last parameter is the controller\u2019s class name, which can be prefixed by a namespace.</p>\n<blockquote>\n<div><ul>\n<li><p class=\"first\">The command to create an HttpController is as follows:</p>\n<blockquote>\n<div><div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl create controller -h ControllerTest\ndg_ctl create controller -h api::v1::ControllerTest\n</pre></div>\n</div>\n</div></blockquote>\n</li>\n<li><p class=\"first\">The command to create a WebSocketController is as follows:</p>\n<blockquote>\n<div><div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl create controller -w WsControllerTest\ndg_ctl create controller -w api::v1::WsControllerTest\n</pre></div>\n</div>\n</div></blockquote>\n</li>\n</ul>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"filter-creation\">\n<h2>Filter creation<a class=\"headerlink\" href=\"#filter-creation\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The <em>dg_ctl create filter</em> command is used to help the user create the source files for filters, see the Filter section.</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl create filter LoginFilter\ndg_ctl create filter webapp::v1::LoginFilter\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"create-project\">\n<h2>Create project<a class=\"headerlink\" href=\"#create-project\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The best way the user creates a new Drogon application project is via the drogon_ctl command, as follows:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl create project ProjectName\n</pre></div>\n</div>\n<p>After the command is executed, a complete project directory will be created in the current directory. The directory name is <em>ProjectName</em>, and the user can directly compile the project in the build directory (cmake .. &amp;&amp; make). Of course, it does not have any business logic.</p>\n<p>The directory structure of the project is as follows:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>\u251c\u2500\u2500 build                         Build folder\n\u251c\u2500\u2500 CMakeLists.txt                Project cmake configuration file\n\u251c\u2500\u2500 cmake_modules                 Cmake scripts <span class=\"k\">for</span> third-party libraries lookup\n\u2502   \u251c\u2500\u2500 FindJsoncpp.cmake\n\u2502   \u251c\u2500\u2500 FindMySQL.cmake\n\u2502   \u251c\u2500\u2500 FindSQLite3.cmake\n\u2502   \u2514\u2500\u2500 FindUUID.cmake\n\u251c\u2500\u2500 config.json                   The configuration file of the drogon application, please refer to the introduction section of the configuration file.\n\u251c\u2500\u2500 controllers                   The directory where the controller <span class=\"nb\">source</span> files are stored\n\u251c\u2500\u2500 filters                       The directory where the filter files are stored\n\u251c\u2500\u2500 main.cc                       Main program\n\u251c\u2500\u2500 models                        The directory of the database model file, model <span class=\"nb\">source</span> file creation see <span class=\"m\">11</span>.2.5\n\u2502   \u2514\u2500\u2500 model.json\n\u2514\u2500\u2500 views                         The directory where view csp files are stored, the <span class=\"nb\">source</span> file does not need to be manually created by the user, and csp files are automatically preprocessed to obtain view <span class=\"nb\">source</span> files when the project is compiled.\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"create-models\">\n<h2>Create models<a class=\"headerlink\" href=\"#create-models\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Use the <em>dg_ctl create model</em> command to create database model source files. The last parameter is the directory where models is stored. This directory must contain a model configuration file named <em>model.json</em> to tell dg_ctl how to connect to the database and which tables to be mapped.</p>\n<p>For example, if you want to create models in the project directory mentioned above, execute the following command in the project directory:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl create model models\n</pre></div>\n</div>\n<p>This command will prompt the user that the file will be overwritten directly. After the user enters y, it will generate all the model files.</p>\n<p>Other source files need to reference model classes should include model header files, such as:</p>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">#include</span> <span class=\"cpf\">&quot;models/User.h&quot;</span><span class=\"cp\"></span>\n</pre></div>\n</div>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">Note that the models directory name is included to distinguish between multiple data sources in the same project. See ORM.</p>\n</div>\n</div>\n<div class=\"section\" id=\"stress-testing\">\n<h2>Stress Testing<a class=\"headerlink\" href=\"#stress-testing\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>One can use the <em>dg_ctl press</em> command to do a stress testing, there are several options for this command.</p>\n<blockquote>\n<div><ul class=\"simple\">\n<li><em>-n num</em> Set the number of requests(default : 1)</li>\n<li><em>-t num</em> Set the number of threads(default : 1), Set the number to the number of CPUs to achieve maximum performance</li>\n<li><em>-c num</em> Set the number of concurrent connections(default : 1)</li>\n<li><em>-q</em> No progress indication(default: no)</li>\n</ul>\n</div></blockquote>\n<p>For example, users can test an HTTP server as follows:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>dg_ctl press -n1000000 -t4 -c1000 -q http://localhost:8080/\ndg_ctl press -n <span class=\"m\">1000000</span> -t <span class=\"m\">4</span> -c <span class=\"m\">1000</span> https://www.domain.com/path/to/be/tested\n</pre></div>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["AOP-Aspect-Oriented-Programming-en", "AOP Aspect Oriented Programming", "N", "next"], ["Configuration-File-en", "Configuration File", "P", "previous"]], "sourcename": "Drogon_ctl-Command-en.rstd.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">drogon_ctl Command</a><ul>\n<li><a class=\"reference internal\" href=\"#version-subcommand\">Version subcommand</a></li>\n<li><a class=\"reference internal\" href=\"#create-sub-command\">Create sub command</a></li>\n<li><a class=\"reference internal\" href=\"#view-creation\">View creation</a></li>\n<li><a class=\"reference internal\" href=\"#controller-creation\">Controller creation</a></li>\n<li><a class=\"reference internal\" href=\"#filter-creation\">Filter creation</a></li>\n<li><a class=\"reference internal\" href=\"#create-project\">Create project</a></li>\n<li><a class=\"reference internal\" href=\"#create-models\">Create models</a></li>\n<li><a class=\"reference internal\" href=\"#stress-testing\">Stress Testing</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rstd", "current_page_name": "Drogon_ctl-Command-en", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}