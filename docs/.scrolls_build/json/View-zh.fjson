{"parents": [{"link": "../index-zh/", "title": "\u4e2d\u6587\u6587\u6863"}], "prev": {"link": "../Filter-zh/", "title": "\u8fc7\u6ee4\u5668"}, "next": {"link": "../Session-zh/", "title": "\u4f1a\u8bdd"}, "title": "\u89c6\u56fe", "meta": {}, "body": "<div class=\"section\" id=\"id1\">\n<h1>\u89c6\u56fe<a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"section\" id=\"id2\">\n<h2>\u89c6\u56fe\u4ecb\u7ecd<a class=\"headerlink\" href=\"#id2\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>\u867d\u7136\u76ee\u524d\u524d\u7aef\u6e32\u67d3\u6280\u672f\u5927\u884c\u5176\u9053\uff0c\u4f7f\u540e\u7aef\u5e94\u7528\u670d\u52a1\u53ea\u9700\u8981\u8fd4\u56de\u76f8\u5e94\u6570\u636e\u7ed9\u524d\u7aef\u5373\u53ef\uff0c\u4e0d\u8fc7\uff0c\u4e00\u4e2a\u597d\u7684web\u6846\u67b6\u8fd8\u662f\u5e94\u8be5\u63d0\u4f9b\u540e\u7aef\u6e32\u67d3\u6280\u672f\uff0c\u4f7f\u670d\u52a1\u7aef\u7a0b\u5e8f\u53ef\u4ee5\u52a8\u6001\u751f\u6210HTML\u9875\u9762\u3002\u89c6\u56fe\uff08View\uff09\u53ef\u4ee5\u5e2e\u52a9\u4f7f\u7528\u8005\u751f\u6210\u8fd9\u4e9b\u9875\u9762\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5b83\u53ea\u8d1f\u8d23\u505a\u8ddf\u5c55\u793a\u76f8\u5173\u7684\u5de5\u4f5c\uff0c\u800c\u590d\u6742\u7684\u4e1a\u52a1\u903b\u8f91\u90fd\u5e94\u8be5\u4ea4\u7ed9\u63a7\u5236\u5668\u5b8c\u6210\u3002</p>\n<p>\u6700\u65e9\u7684web\u5e94\u7528\u7a0b\u5e8f\u90fd\u662f\u628aHTML\u5d4c\u5165\u5230\u7a0b\u5e8f\u7f16\u7801\u91cc\uff0c\u8fbe\u5230\u52a8\u6001\u751f\u6210HTML\u9875\u9762\u7684\u76ee\u7684\uff0c\u4e0d\u8fc7\u8fd9\u6837\u505a\u6709\u6548\u7387\u4f4e\u3001\u4e0d\u76f4\u89c2\u7b49\u8bf8\u591a\u7f3a\u70b9\uff0c\u4e8e\u662f\u51fa\u73b0\u4e86\u8bf8\u5982JSP\u7b49\u8bed\u8a00\uff0c\u53cd\u5176\u9053\u800c\u884c\u4e4b\uff0c\u628a\u7a0b\u5e8f\u4ee3\u7801\u5d4c\u5165\u5230HTML\u9875\u9762\u91cc\u3002drogon\u91c7\u7528\u7684\u5f53\u7136\u662f\u540e\u4e00\u79cd\u65b9\u6848\uff0c\u4e0d\u8fc7\uff0c\u5f88\u660e\u663e\uff0c\u7531\u4e8eC++\u662f\u7f16\u8bd1\u6267\u884c\u7684\uff0c\u6211\u4eec\u9700\u8981\u628a\u8fd9\u79cd\u5d4c\u5165\u4e86C++\u4ee3\u7801\u7684\u9875\u9762\u8f6c\u6362\u6210C++\u6e90\u7a0b\u5e8f\uff0c\u624d\u80fd\u7f16\u8bd1\u8fdb\u5e94\u7528\u7a0b\u5e8f\u3002\u6240\u4ee5\uff0cdrogon\u5b9a\u4e49\u4e86\u81ea\u5df1\u4e13\u95e8\u7684CSP(C++ Server Pages)\u63cf\u8ff0\u8bed\u8a00\uff0c\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177drogon_ctl\u53ef\u4ee5\u628acsp\u6587\u4ef6\u8f6c\u6362\u6210C++\u6e90\u6587\u4ef6\u4ee5\u4f9b\u7f16\u8bd1\u3002</p>\n</div>\n<div class=\"section\" id=\"drogoncsp\">\n<h2>Drogon\u7684csp<a class=\"headerlink\" href=\"#drogoncsp\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>drogon\u7684csp\u65b9\u6848\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u7528\u7279\u6b8a\u7684\u6807\u8bb0\u7b26\u53f7\u628aC++\u4ee3\u7801\u5d4c\u5165\u5230HTML\u9875\u9762\u91cc\u5c31\u53ef\u4ee5\u4e86\u3002\u5176\u4e2d\uff1a</p>\n<blockquote>\n<div><ul class=\"simple\">\n<li>\u5939\u5728\u6807\u7b7e*&lt;%inc*\u548c*%&gt;*\u4e4b\u95f4\u7684\u5185\u5bb9\u88ab\u89c6\u4e3a\u9700\u8981\u5f15\u7528\u7684\u5934\u6587\u4ef6\u90e8\u5206\uff0c\u8fd9\u91cc\u53ea\u80fd\u5199\u5165*#include*\u8bed\u53e5\uff0c\u5982*&lt;%inc#include \u201cxx.h\u201d %&gt;*,\u4e0d\u8fc7\u5f88\u591a\u5e38\u89c1\u7684\u5934\u6587\u4ef6drogon\u90fd\u81ea\u52a8\u5305\u542b\u4e86\uff0c\u7528\u6237\u57fa\u672c\u4e0a\u7528\u4e0d\u5230\u8fd9\u4e2a\u6807\u7b7e\uff1b</li>\n<li>\u5939\u5728\u6807\u7b7e*&lt;%c++*\u548c*%&gt;*\u4e4b\u95f4\u7684\u6240\u6709\u5185\u5bb9\u90fd\u88ab\u89c6\u4e3aC++\u7684\u4ee3\u7801,\u5982*&lt;c++ std:string name=\u201ddrogon\u201d; %&gt;*\uff1b</li>\n<li><dl class=\"first docutils\">\n<dt>C++\u7684\u4ee3\u7801\u4e00\u822c\u90fd\u4f1a\u539f\u5c01\u4e0d\u52a8\u7684\u8f6c\u79fb\u5230\u76ee\u6807\u6e90\u6587\u4ef6\u4e2d\uff0c\u9664\u4e86\u4e0b\u9762\u4e24\u79cd\u7279\u6b8a\u6807\u8bb0\uff1a</dt>\n<dd><ul class=\"first last\">\n<li><em>&#64;&#64;*\u4ee3\u8868\u63a7\u5236\u5668\u4f20\u8fc7\u6765\u7684data\u53d8\u91cf\uff0c\u7c7b\u578b\u662f*HttpViewData</em>\uff0c\u53ef\u4ee5\u4ece\u4e2d\u83b7\u53d6\u9700\u8981\u7684\u5185\u5bb9\uff1b</li>\n<li><a href=\"#id3\"><span class=\"problematic\" id=\"id4\">*</span></a>$$*\u4ee3\u8868\u8868\u793a\u9875\u9762\u5185\u5bb9\u7684\u6d41\u5bf9\u8c61\uff0c\u53ef\u4ee5\u628a\u9700\u8981\u663e\u793a\u7684\u5185\u5bb9\u901a\u8fc7&lt;&lt;\u64cd\u4f5c\u7b26\u663e\u793a\u5728\u9875\u9762\u4e0a\uff1b</li>\n</ul>\n</dd>\n</dl>\n</li>\n<li>\u5939\u5728\u6807\u7b7e*[[<em>\u548c</em>]]*\u4e4b\u95f4\u7684\u5185\u5bb9\u88ab\u8ba4\u4e3a\u662f\u53d8\u91cf\u540d\u5b57\uff0cview\u4f1a\u4ee5\u8fd9\u4e2a\u540d\u5b57\u4e3akeyword\u4ece\u63a7\u5236\u5668\u4f20\u8fc7\u6765\u7684\u6570\u636e\u91cc\u627e\u5230\u5bf9\u5e94\u7684\u53d8\u91cf\uff0c\u5e76\u628a\u5b83\u8f93\u51fa\u5230\u9875\u9762\u7684\u5bf9\u5e94\u4f4d\u7f6e\uff0c\u53d8\u91cf\u540d\u5b57\u524d\u540e\u7684\u7a7a\u683c\u4f1a\u88ab\u7701\u7565\uff0c<em>[[*\u548c</em>]]*\u4e0d\u8981\u5206\u884c\u5199\uff0c\u540c\u65f6\uff0c\u51fa\u4e8e\u6027\u80fd\u8003\u8651\uff0c\u53ea\u652f\u6301\u4e09\u79cd\u5b57\u7b26\u4e32\u6570\u636e\u7c7b\u578b*(const char *,std::string\u548cconst std::string*\uff0c\u56e0\u4e3a\u8f93\u51fa\u65f6\u6d89\u53ca\u6570\u636e\u7c7b\u578b\u5224\u65ad\uff0c\u8fc7\u591a\u7c7b\u578b\u4f1a\u5bfc\u81f4\u8fc7\u591a\u7684\u6761\u4ef6\u8bed\u53e5)\uff0c\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8bf7\u7528\u4e0a\u9762\u63d0\u5230\u7684\u65b9\u5f0f\u8f93\u51fa(\u6216\u8005\u5c06\u9700\u8981\u8f93\u51fa\u7684\u53d8\u91cf\u4ee5string\u7c7b\u578b\u5b58\u5165data\u4e2d);</li>\n<li>\u5939\u5728\u6807\u7b7e*{%*\u548c*%}*\u4e4b\u95f4\u7684\u5185\u5bb9\u88ab\u8ba4\u4e3a\u662fC++\u7a0b\u5e8f\u91cc\u53d8\u91cf\u7684\u540d\u5b57\u6216\u8868\u8fbe\u5f0f\uff08\u800c\u4e0d\u662f\u63a7\u5236\u5668\u4f20\u8fc7\u6765\u7684\u6570\u636e\u7684keyword\uff09\uff0cview\u4f1a\u628a\u8be5\u53d8\u91cf\u7684\u5185\u5bb9\u6216\u8868\u8fbe\u5f0f\u7684\u503c\u8f93\u51fa\u5230\u9875\u9762\u7684\u5bf9\u5e94\u4f4d\u7f6e\u3002\u5bb9\u6613\u77e5\u9053*{%val.xx%}*\u7b49\u6548\u4e8e*&lt;%c++$$&lt;&lt;val.xx;%&gt;*,\u53ea\u662f\u524d\u8005\u66f4\u4e3a\u7b80\u5355\u76f4\u89c2\u3002\u540c\u6837\u7684\uff0c\u4e24\u4e2a\u6807\u7b7e\u4e0d\u8981\u5206\u884c\u5199\uff1b</li>\n<li>\u5939\u5728\u6807\u7b7e*&lt;%view*\u548c*%&gt;*\u4e4b\u95f4\u7684\u5185\u5bb9\u88ab\u8ba4\u4e3a\u662f\u5b50\u89c6\u56fe\u7684\u540d\u5b57\uff0c\u6846\u67b6\u4f1a\u627e\u5230\u76f8\u5e94\u7684\u5b50\u89c6\u56fe\u5e76\u628a\u5b83\u7684\u5185\u5bb9\u586b\u5145\u5230\u8be5\u6807\u7b7e\u6240\u5728\u4f4d\u7f6e\uff1b\u89c6\u56fe\u540d\u5b57\u524d\u540e\u7684\u7a7a\u683c\u4f1a\u88ab\u5ffd\u7565\uff0c\u540c\u65f6*&lt;%view*\u548c*%&gt;*\u4e0d\u8981\u5206\u884c\u5199\uff0c\u5b50\u89c6\u56fe\u548c\u7236\u89c6\u56fe\u5171\u7528\u63a7\u5236\u5668\u7684\u6570\u636e, \u53ef\u4ee5\u591a\u7ea7\u5d4c\u5957\u4f46\u4e0d\u8981\u5faa\u73af\u5d4c\u5957\u3002</li>\n<li>\u5939\u5728\u6807\u7b7e*&lt;%layout*\u548c*%&gt;*\u4e4b\u95f4\u7684\u5185\u5bb9\u88ab\u8ba4\u4e3a\u662f\u5e03\u5c40\u7684\u540d\u5b57\uff0c\u6846\u67b6\u4f1a\u627e\u5230\u76f8\u5e94\u7684\u5e03\u5c40\u5e76\u628a\u672c\u89c6\u56fe\u7684\u5185\u5bb9\u586b\u5145\u5230\u8be5\u5e03\u5c40\u7684\u67d0\u4e2a\u4f4d\u7f6e\uff08\u5728\u5e03\u5c40\u4e2d\u7531\u5360\u4f4d\u7b26*[[]]*\u6807\u5b9a\u8be5\u4f4d\u7f6e\uff09\uff1b\u5e03\u5c40\u540d\u5b57\u524d\u540e\u7684\u7a7a\u683c\u4f1a\u88ab\u5ffd\u7565\uff0c\u540c\u65f6*&lt;%layout*\u548c*%&gt;*\u4e0d\u8981\u5206\u884c\u5199\uff0c\u53ef\u4ee5\u591a\u7ea7\u5d4c\u5957\u4f46\u4e0d\u8981\u5faa\u73af\u5d4c\u5957\u3002</li>\n</ul>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"id5\">\n<h2>\u89c6\u56fe\u7684\u4f7f\u7528<a class=\"headerlink\" href=\"#id5\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>drogon\u5e94\u7528\u7a0b\u5e8f\u7684http\u54cd\u5e94\u90fd\u662f\u7531\u63a7\u5236\u5668handler\u751f\u6210\u7684\uff0c\u6240\u4ee5\uff0c\u7531\u89c6\u56fe\u6e32\u67d3\u7684\u54cd\u5e94\u4e5f\u7531handler\u751f\u6210\uff0c\u901a\u8fc7\u8c03\u7528\u5982\u4e0b\u63a5\u53e3\u751f\u6210:</p>\n<p>\u8fd9\u4e2a\u63a5\u53e3\u662fHttpResponse\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\uff0c\u5b83\u6709\u4e24\u4e2a\u53c2\u6570\uff1a</p>\n<blockquote>\n<div><ul class=\"simple\">\n<li>viewName: \u89c6\u56fe\u7684\u540d\u5b57\uff0c\u4f20\u5165\u7684csp\u6587\u4ef6\u540d(<strong>\u6269\u5c55\u540d\u53ef\u7701\u7565</strong>);</li>\n<li>data: \u63a7\u5236\u5668\u7684handler\u4f20\u7ed9\u89c6\u56fe\u7684\u6570\u636e\uff0c\u7c7b\u578b\u662f*HttpViewData*\uff0c\u8fd9\u662f\u4e2a\u7279\u6b8a\u7684map\uff0c\u53ef\u4ee5\u5b58\u5165\u548c\u53d6\u51fa\u4efb\u610f\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u5177\u4f53\u4f7f\u7528\u8bf7\u53c2\u8003HttpViewData API\u8bf4\u660e\uff1b</li>\n</ul>\n</div></blockquote>\n<p>\u53ef\u4ee5\u770b\u5230\uff0c\u63a7\u5236\u5668\u4e0d\u9700\u8981\u5f15\u7528\u89c6\u56fe\u7684\u5934\u6587\u4ef6\uff0c\u63a7\u5236\u5668\u548c\u89c6\u56fe\u5b9e\u73b0\u4e86\u5f88\u597d\u7684\u89e3\u8026\uff1b\u4ed6\u4eec\u552f\u4e00\u7684\u8054\u7cfb\u662fdata\u53d8\u91cf\uff0c\u5bf9data\u7684\u5185\u5bb9\uff0c\u63a7\u5236\u5668\u548c\u89c6\u56fe\u8981\u6709\u4e00\u81f4\u7684\u7ea6\u5b9a\uff1b</p>\n</div>\n<div class=\"section\" id=\"id6\">\n<h2>\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50<a class=\"headerlink\" href=\"#id6\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>\u73b0\u5728\u6211\u4eec\u505a\u4e00\u4e2a\u4f8b\u5b50\uff0c\u628a\u6d4f\u89c8\u5668\u53d1\u6765\u7684HTTP\u8bf7\u6c42\u7684\u53c2\u6570\u663e\u793a\u5728\u8fd4\u56de\u7684html\u9875\u9762\u91cc\u3002</p>\n<p>\u6211\u4eec\u8fd9\u91cc\u76f4\u63a5\u7528HttpAppFramework\u7684\u63a5\u53e3\u5b9a\u4e49handler\uff0c\u5728main\u6587\u4ef6\u4e2d\uff0c\u8c03\u7528run()\u65b9\u6cd5\u4e4b\u524d\u52a0\u5165\u5982\u4e0b\u4ee3\u7801\uff1a</p>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">drogon</span><span class=\"o\">::</span><span class=\"n\">HttpAppFramework</span><span class=\"o\">::</span><span class=\"n\">instance</span><span class=\"p\">()</span>\n        <span class=\"p\">.</span><span class=\"n\">registerHttpMethod</span><span class=\"p\">(</span><span class=\"s\">&quot;/list_para&quot;</span><span class=\"p\">,</span>\n                           <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">](</span><span class=\"k\">const</span> <span class=\"n\">HttpRequestPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">req</span><span class=\"p\">,</span>\n                               <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">function</span><span class=\"o\">&lt;</span><span class=\"kt\">void</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpResponsePtr</span> <span class=\"o\">&amp;</span><span class=\"p\">)</span><span class=\"o\">&gt;</span> <span class=\"o\">&amp;&amp;</span><span class=\"n\">callback</span><span class=\"p\">)</span>\n                           <span class=\"p\">{</span>\n                                <span class=\"k\">auto</span> <span class=\"n\">para</span><span class=\"o\">=</span><span class=\"n\">req</span><span class=\"o\">-&gt;</span><span class=\"n\">getParameters</span><span class=\"p\">();</span>\n                                <span class=\"n\">HttpViewData</span> <span class=\"n\">data</span><span class=\"p\">;</span>\n                                <span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">insert</span><span class=\"p\">(</span><span class=\"s\">&quot;title&quot;</span><span class=\"p\">,</span><span class=\"s\">&quot;ListParameters&quot;</span><span class=\"p\">);</span>\n                                <span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">insert</span><span class=\"p\">(</span><span class=\"s\">&quot;parameters&quot;</span><span class=\"p\">,</span><span class=\"n\">para</span><span class=\"p\">);</span>\n                                <span class=\"k\">auto</span> <span class=\"n\">resp</span><span class=\"o\">=</span><span class=\"n\">HttpResponse</span><span class=\"o\">::</span><span class=\"n\">newHttpViewResponse</span><span class=\"p\">(</span><span class=\"s\">&quot;ListParameters.csp&quot;</span><span class=\"p\">,</span><span class=\"n\">data</span><span class=\"p\">);</span>\n                                <span class=\"n\">callback</span><span class=\"p\">(</span><span class=\"n\">resp</span><span class=\"p\">);</span>\n                           <span class=\"p\">});</span>\n</pre></div>\n</div>\n<p>\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u628a\u4e00\u4e2alambda\u8868\u8fbe\u5f0fhandler\u6ce8\u518c\u5230*/list_para*\u8def\u5f84\u4e0a\uff0c\u83b7\u53d6\u8bf7\u6c42\u7684\u53c2\u6570\u4f20\u9012\u7ed9\u89c6\u56fe\u663e\u793a\u3002 \u7136\u540e\u8fdb\u5165views\u6587\u4ef6\u5939\uff0c\u521b\u5efa\u4e00\u4e2a\u89c6\u56fe\u6587\u4ef6ListParameters.csp\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;%c++\n    auto <span class=\"nv\">para</span><span class=\"o\">=</span>@@.get&lt;std::unordered_map&lt;std::string,std::string&gt;&gt;<span class=\"o\">(</span><span class=\"s2\">&quot;parameters&quot;</span><span class=\"o\">)</span><span class=\"p\">;</span>\n%&gt;\n&lt;head&gt;\n    &lt;meta <span class=\"nv\">charset</span><span class=\"o\">=</span><span class=\"s2\">&quot;UTF-8&quot;</span>&gt;\n    &lt;title&gt;<span class=\"o\">[[</span> title <span class=\"o\">]]</span>&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;%c++ <span class=\"k\">if</span><span class=\"o\">(</span>para.size<span class=\"o\">()</span>&gt;0<span class=\"o\">){</span>%&gt;\n    &lt;H1&gt;Parameters&lt;/H1&gt;\n    &lt;table <span class=\"nv\">border</span><span class=\"o\">=</span><span class=\"s2\">&quot;1&quot;</span>&gt;\n    &lt;tr&gt;\n        &lt;th&gt;name&lt;/th&gt;\n        &lt;th&gt;value&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;%c++ <span class=\"k\">for</span><span class=\"o\">(</span>auto iter:para<span class=\"o\">){</span>%&gt;\n    &lt;tr&gt;\n        &lt;td&gt;<span class=\"o\">{</span>%iter.first%<span class=\"o\">}</span>&lt;/td&gt;\n        &lt;td&gt;&lt;%c++ <span class=\"nv\">$$</span>&lt;&lt;iter.second<span class=\"p\">;</span>%&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;%c++<span class=\"o\">}</span>%&gt;\n    &lt;/table&gt;\n    &lt;%c++ <span class=\"o\">}</span><span class=\"k\">else</span><span class=\"o\">{</span>%&gt;\n    &lt;H1&gt;no parameter&lt;/H1&gt;\n    &lt;%c++<span class=\"o\">}</span>%&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</pre></div>\n</div>\n<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u5c06ListParameters.csp\u6587\u4ef6\u8f6c\u6362\u6210c++\u6e90\u6587\u4ef6\uff1a</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>drogon_ctl create view ListParameters.csp\n</pre></div>\n</div>\n<p>\u8fd0\u884c\u5b8c\u6bd5\u540e\uff0c\u5f53\u524d\u76ee\u5f55\u4f1a\u51fa\u73b0ListParameters.h\u548cListParameters.cc\u4e24\u4e2a\u6e90\u6587\u4ef6\uff0c\u5c31\u53ef\u4ee5\u7528\u6765\u7f16\u8bd1\u8fdbweb\u5e94\u7528\u7a0b\u5e8f\u91cc\u4e86\u3002</p>\n<p>\u7528cmake\u91cd\u65b0\u7f16\u8bd1\u6574\u4e2a\u5de5\u7a0b\uff0c\u8fd0\u884c\u76ee\u6807\u7a0b\u5e8fwebapp\uff0c\u5c31\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u6d4b\u8bd5\u6548\u679c\u4e86\uff0c\u5728\u5730\u5740\u680f\u8f93\u5165http://localhost/list_para?p1=a&amp;p2=b&amp;p3=c\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u9875\u9762\uff1a</p>\n<p>view page</p>\n<p>\u540e\u7aef\u6e32\u67d3\u7684html\u9875\u9762\u5c31\u8fd9\u6837\u7b80\u5355\u7684\u52a0\u4e0a\u4e86\u3002\u867d\u7136\u9875\u9762\u7b80\u964b\u70b9\uff0c\u4f46\u4e0d\u5f71\u54cd\u6211\u4eec\u8bf4\u660e\u89c6\u56fe\u7684\u7528\u6cd5\u3002</p>\n</div>\n<div class=\"section\" id=\"csp\">\n<h2>csp\u6587\u4ef6\u7684\u81ea\u52a8\u5316\u5904\u7406<a class=\"headerlink\" href=\"#csp\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">\u6ce8\u610f\uff1a\u5982\u679c\u4f60\u7684\u5de5\u7a0b\u662f\u4f7f\u7528drogon_ctl\u547d\u4ee4\u521b\u5efa\u7684\uff0c\u90a3\u4e48\u672c\u8282\u63cf\u8ff0\u7684\u5185\u5bb9\u5df2\u7ecf\u7531\u8be5\u547d\u4ee4\u81ea\u52a8\u5e2e\u4f60\u505a\u4e86\u3002</p>\n</div>\n<p>\u663e\u7136\uff0c\u6bcf\u6b21\u4fee\u6539csp\u6587\u4ef6\u90fd\u9700\u8981\u624b\u52a8\u8fd0\u884cdrogon_ctl\u547d\u4ee4\u663e\u5f97\u592a\u4e0d\u65b9\u4fbf\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u628adrogon_ctl\u7684\u5904\u7406\u653e\u8fdbCMakeLists.txt\u6587\u4ef6\u91cc\uff0c\u4ecd\u4ee5\u524d\u9762\u7684\u4f8b\u5b50\u4e3a\u4f8b\uff0c\u5047\u8bbe\u6211\u4eec\u628a\u6240\u6709\u7684csp\u6587\u4ef6\u90fd\u653e\u5230views\u6587\u4ef6\u5939\u91cc\uff0c\u5219CMakeLists.txt\u53ef\u4ee5\u6dfb\u52a0\u5982\u4e0b\u5904\u7406\uff1a</p>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kt\">FILE</span><span class=\"p\">(</span><span class=\"n\">GLOB</span> <span class=\"n\">SCP_LIST</span> <span class=\"n\">$</span><span class=\"p\">{</span><span class=\"n\">CMAKE_CURRENT_SOURCE_DIR</span><span class=\"p\">}</span><span class=\"o\">/</span><span class=\"n\">views</span><span class=\"cm\">/*.csp)</span>\n<span class=\"cm\">foreach(cspFile ${SCP_LIST})</span>\n<span class=\"cm\">    message(STATUS &quot;cspFile:&quot; ${cspFile})</span>\n<span class=\"cm\">    EXEC_PROGRAM(basename ARGS &quot;-s .csp ${cspFile}&quot; OUTPUT_VARIABLE classname)</span>\n<span class=\"cm\">    message(STATUS &quot;view classname:&quot; ${classname})</span>\n<span class=\"cm\">    add_custom_command(OUTPUT ${classname}.h ${classname}.cc</span>\n<span class=\"cm\">        COMMAND drogon_ctl</span>\n<span class=\"cm\">        ARGS create view ${cspFile}</span>\n<span class=\"cm\">        DEPENDS ${cspFile}</span>\n<span class=\"cm\">        VERBATIM )</span>\n<span class=\"cm\">set(VIEWSRC ${VIEWSRC} ${classname}.cc)</span>\n<span class=\"cm\">endforeach()</span>\n</pre></div>\n</div>\n<p>\u7136\u540e\u5728add_executable\u8bed\u53e5\u4e2d\u6dfb\u52a0\u65b0\u7684\u6e90\u6587\u4ef6\u96c6\u5408${VIEWSRC},\u5982\u4e0b\uff1a</p>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">Add_executable</span><span class=\"p\">(</span><span class=\"n\">webapp</span> <span class=\"n\">$</span><span class=\"p\">{</span><span class=\"n\">SRC_DIR</span><span class=\"p\">}</span> <span class=\"n\">$</span><span class=\"p\">{</span><span class=\"n\">VIEWSRC</span><span class=\"p\">})</span>\n</pre></div>\n</div>\n<p>\u4e0a\u8ff0\u63aa\u65bd\u5728drogon_ctl create project\u547d\u4ee4\u751f\u6210\u7684\u5de5\u7a0b\u91cc\u5df2\u7ecf\u5199\u5165CMakeLists.txt\u6587\u4ef6\uff0c\u7528\u6237\u5728views\u6587\u4ef6\u5939\u521b\u5efa\u7684csp\u6587\u4ef6\u90fd\u4f1a\u88ab\u81ea\u52a8\u8f6c\u6362\u5e76\u7f16\u8bd1\u8fdb\u5e94\u7528\u7a0b\u5e8f\u3002</p>\n</div>\n<div class=\"section\" id=\"id7\">\n<h2>\u89c6\u56fe\u7684\u52a8\u6001\u7f16\u8bd1\u548c\u52a0\u8f7d<a class=\"headerlink\" href=\"#id7\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>drogon\u63d0\u4f9b\u4e86\u5728\u5e94\u7528\u8fd0\u884c\u671f\u52a8\u6001\u7f16\u8bd1\u548c\u52a0\u8f7dcsp\u6587\u4ef6\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u5982\u4e0b\u63a5\u53e3\u8bbe\u7f6e\uff1a</p>\n<p>\u8be5\u63a5\u53e3\u662f*HttpAppFramework*\u7684\u6210\u5458\u65b9\u6cd5\uff0c\u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u6570\u7ec4\uff0c\u4ee3\u8868\u89c6\u56fecsp\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u7684\u5217\u8868\u3002\u8c03\u7528\u8fd9\u4e2a\u63a5\u53e3\u540e\uff0cdrogon\u5c06\u81ea\u52a8\u641c\u7d22\u8fd9\u4e9b\u76ee\u5f55\uff0c\u53d1\u73b0\u65b0\u7684\u6216\u8005\u88ab\u4fee\u6539\u7684csp\u6587\u4ef6\u540e\uff0c\u90fd\u5c06\u81ea\u52a8\u751f\u6210\u6e90\u6587\u4ef6\u3001\u7f16\u8bd1\u6210\u52a8\u6001\u5e93\u6587\u4ef6\u5e76\u52a0\u8f7d\u5230\u5e94\u7528\u91cc\uff0c\u6574\u4e2a\u8fc7\u7a0b\u5e94\u7528\u7a0b\u5e8f\u65e0\u9700\u91cd\u542f\u3002\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u5b9e\u9a8c\uff0c\u89c2\u5bdfcsp\u7684\u4fee\u6539\u5e26\u6765\u7684\u9875\u9762\u53d8\u5316\u3002</p>\n<p>\u5f88\u663e\u7136\uff0c\u8be5\u529f\u80fd\u4f9d\u8d56\u4e8e\u5f00\u53d1\u73af\u5883\uff0c\u5982\u679cdrogon\u548cwebapp\u90fd\u5728\u8fd9\u53f0\u670d\u52a1\u5668\u7f16\u8bd1\uff0c\u5219\u52a8\u6001\u52a0\u8f7dcsp\u9875\u9762\u4e5f\u5e94\u8be5\u6ca1\u6709\u95ee\u9898\uff1b</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">\u6ce8\u610f\uff1a\u52a8\u6001\u52a0\u8f7d\u7684\u89c6\u56fe\u4e0d\u80fd\u9759\u6001\u7f16\u8bd1\u8fdb\u7a0b\u5e8f\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u89c6\u56fe\u5df2\u7ecf\u9759\u6001\u7f16\u8bd1\u8fdb\u7a0b\u5e8f\uff0c\u90a3\u4e48\u5b83\u65e0\u6cd5\u901a\u8fc7\u52a8\u6001\u52a0\u8f7d\u66f4\u65b0\uff0c\u4f60\u53ef\u4ee5\u5355\u72ec\u5efa\u4e00\u4e2a\u52a8\u6001\u89c6\u56fe\u8def\u5f84\uff0c\u5e76\u5728\u5f00\u53d1\u9636\u6bb5\u628a\u89c6\u56fe\u79fb\u52a8\u5230\u8fd9\u4e2a\u8def\u5f84\u8fdb\u884c\u8c03\u8bd5\uff08linux\u64cd\u4f5c\u7cfb\u7edf\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\uff09\u3002</p>\n</div>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">\u6ce8\u610f: \u8be5\u7279\u6027\u6700\u597d\u7528\u4e8e\u5728\u5f00\u53d1\u9636\u6bb5\u65b9\u4fbf\u8c03\u6574\u9875\u9762\uff0c\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u8fd8\u662f\u5efa\u8bae\u76f4\u63a5\u7f16\u8bd1\u6210\u76ee\u6807\u6587\u4ef6\u8fd0\u884c\uff0c\u8fd9\u4e3b\u8981\u662f\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u8003\u8651\u3002</p>\n</div>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">\u6ce8\u610f: \u5982\u679c\u52a0\u8f7d\u65f6\u9047\u5230*symbol not found*\u9519\u8bef\uff0c\u8bf7\u4f7f\u7528*cmake .. -DCMAKE_ENABLE_EXPORTS=on*\u6216\u53d6\u6d88CMakeLists.txt\u6700\u540e\u4e00\u884c\u5bf9*set_property(TARGET ${PROJECT_NAME} PROPERTY ENABLE_EXPORTS ON)*\u7684\u6ce8\u91ca\uff0c\u5e76\u91cd\u65b0\u7f16\u8bd1\u4f60\u7684\u5de5\u7a0b</p>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["Session-zh", "\u4f1a\u8bdd", "N", "next"], ["Filter-zh", "\u8fc7\u6ee4\u5668", "P", "previous"]], "sourcename": "View-zh.rstd.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">\u89c6\u56fe</a><ul>\n<li><a class=\"reference internal\" href=\"#id2\">\u89c6\u56fe\u4ecb\u7ecd</a></li>\n<li><a class=\"reference internal\" href=\"#drogoncsp\">Drogon\u7684csp</a></li>\n<li><a class=\"reference internal\" href=\"#id5\">\u89c6\u56fe\u7684\u4f7f\u7528</a></li>\n<li><a class=\"reference internal\" href=\"#id6\">\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50</a></li>\n<li><a class=\"reference internal\" href=\"#csp\">csp\u6587\u4ef6\u7684\u81ea\u52a8\u5316\u5904\u7406</a></li>\n<li><a class=\"reference internal\" href=\"#id7\">\u89c6\u56fe\u7684\u52a8\u6001\u7f16\u8bd1\u548c\u52a0\u8f7d</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rstd", "current_page_name": "View-zh", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}