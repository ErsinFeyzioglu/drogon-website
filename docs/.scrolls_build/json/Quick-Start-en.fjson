{"parents": [{"link": "../index-en/", "title": "English documentation"}], "prev": {"link": "../Installation-en/", "title": "Installation"}, "next": {"link": "../Controller-Introduction-en/", "title": "Controller Introduction"}, "title": "Quick Start", "meta": {}, "body": "<div class=\"section\" id=\"quick-start\">\n<h1>Quick Start<a class=\"headerlink\" href=\"#quick-start\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"section\" id=\"static-site\">\n<h2>Static Site<a class=\"headerlink\" href=\"#static-site\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Let\u2019s start with a simple example that introduces the usage of drogon. In this example we create a project using the command line tool <em>drogon_ctl</em>:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>drogon_ctl create project your_project_name\n</pre></div>\n</div>\n<p>There are several useful folders in the project directory already:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>\u251c\u2500\u2500 build                         Build folder\n\u251c\u2500\u2500 CMakeLists.txt                Project cmake configuration file\n\u251c\u2500\u2500 config.json                   Drogon application configuration file\n\u251c\u2500\u2500 controllers                   The folder where the controller <span class=\"nb\">source</span> files are stored\n\u251c\u2500\u2500 filters                       The folder where the filter files are stored\n\u251c\u2500\u2500 main.cc                       Main program\n\u251c\u2500\u2500 models                        The folder of the database model file\n\u2502   \u2514\u2500\u2500 model.json\n\u2514\u2500\u2500 views                         The folder where view csp files are stored\n</pre></div>\n</div>\n<p>Users can put various files (such as controllers, filters, views, etc.) into corresponding folders. For more convenience and less error, we strongly recommend that users create their own web application projects using the <code class=\"docutils literal notranslate\"><span class=\"pre\">drogon_ctl</span></code> command. See drogon_ctl for more details.</p>\n<p>Let\u2019s look at the main.cc file:</p>\n<div class=\"literal-block-wrapper docutils container\" id=\"id1\">\n<div class=\"code-block-caption\"><span class=\"caption-text\"><em>main.cpp</em></span><a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this code\">\u00b6</a></div>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">#include</span> <span class=\"cpf\">&lt;drogon/HttpAppFramework.h&gt;</span><span class=\"cp\"></span>\n<span class=\"kt\">int</span> <span class=\"nf\">main</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"c1\">//Set HTTP listener address and port</span>\n    <span class=\"n\">drogon</span><span class=\"o\">::</span><span class=\"n\">app</span><span class=\"p\">().</span><span class=\"n\">addListener</span><span class=\"p\">(</span><span class=\"s\">&quot;0.0.0.0&quot;</span><span class=\"p\">,</span><span class=\"mi\">80</span><span class=\"p\">);</span>\n    <span class=\"c1\">//Load config file</span>\n    <span class=\"c1\">//drogon::app().loadConfigFile(&quot;../config.json&quot;);</span>\n    <span class=\"c1\">//Run HTTP framework,the method will block in the internal event loop</span>\n    <span class=\"n\">drogon</span><span class=\"o\">::</span><span class=\"n\">app</span><span class=\"p\">().</span><span class=\"n\">run</span><span class=\"p\">();</span>\n    <span class=\"k\">return</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n</div>\n<p>Then build your project as below:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nb\">cd</span> build\ncmake ..\nmake\n</pre></div>\n</div>\n<p>After the compilation is complete, run the target <em>./your_project_name</em>.</p>\n<p>Now, we add one simply static file index.html to the Http root path:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nb\">echo</span> <span class=\"s1\">&#39;&lt;h1&gt;Hello Drogon!&lt;/h1&gt;&#39;</span> &gt;&gt;index.html\n</pre></div>\n</div>\n<p>The default root path is <em>\u201c./\u201d</em>, this could be modified by config.json also, See Configureation File for more details. Then you can visit this page by URL <em>\u201chttp://localhost\u201d</em> or <em>\u201chttp://localhost/index.html\u201d</em> (or the IP of the server where your wepapp running).</p>\n<div class=\"admonition seealso\">\n<p class=\"first admonition-title\">See also</p>\n<p class=\"last\">Hello Drogon!</p>\n</div>\n<p>If server cannot find the the page you have requested, it return 404 page: 404 page</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">Note: Make sure your server firewall have allowed the 80 port, otherwise you won\u2019t see these pages.</p>\n</div>\n<p>We could copy the directory and files of a static website to the startup directory of this running webapp, then we can access them from the browser. The file types supported by drogon are \u201chtml\u201d, \u201cjs\u201d, \u201ccss\u201d, \u201cxml\u201d, \u201cxsl\u201d, \u201ctxt\u201d, \u201csvg\u201d, \u201cttf\u201d, \u201cotf\u201d, \u201cwoff2\u201d, \u201cwoff\u201d , \u201ceot\u201d, \u201cpng\u201d, \u201cjpg\u201d, \u201cjpeg\u201d, \u201cgif\u201d, \u201cbmp\u201d, \u201cico\u201d, \u201cicns\u201d, etc by default. Drogon also provides interfaces to change these file types. For details, please refer to the HttpAppFramework API.</p>\n</div>\n<div class=\"section\" id=\"dynamic-site\">\n<h2>Dynamic Site<a class=\"headerlink\" href=\"#dynamic-site\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Let\u2019s see how to add controllers to this application\uff0c and let the controller respond contents.</p>\n<p>One can use the drogon_ctl command line tool to generate controller source files. Let\u2019s run it in the <em>controllers</em> directory:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>drogon_ctl create controller TestCtrl\n</pre></div>\n</div>\n<p>As you can see, there are two new files, TestCtrl.h and TestCtrl.cc\uff1a</p>\n<p>TestCtrl.h is as follows:</p>\n<div class=\"literal-block-wrapper docutils container\" id=\"id2\">\n<div class=\"code-block-caption\"><span class=\"caption-text\"><em>TestCtrl.h</em></span><a class=\"headerlink\" href=\"#id2\" title=\"Permalink to this code\">\u00b6</a></div>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">#pragma once</span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;drogon/HttpSimpleController.h&gt;</span><span class=\"cp\"></span>\n<span class=\"k\">using</span> <span class=\"k\">namespace</span> <span class=\"n\">drogon</span><span class=\"p\">;</span>\n<span class=\"k\">class</span> <span class=\"nc\">TestCtrl</span><span class=\"o\">:</span><span class=\"k\">public</span> <span class=\"n\">drogon</span><span class=\"o\">::</span><span class=\"n\">HttpSimpleController</span><span class=\"o\">&lt;</span><span class=\"n\">TestCtrl</span><span class=\"o\">&gt;</span>\n<span class=\"p\">{</span>\n<span class=\"k\">public</span><span class=\"o\">:</span>\n    <span class=\"k\">virtual</span> <span class=\"kt\">void</span> <span class=\"n\">asyncHandleHttpRequest</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpRequestPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">req</span><span class=\"p\">,</span>\n                                        <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">function</span><span class=\"o\">&lt;</span><span class=\"kt\">void</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpResponsePtr</span> <span class=\"o\">&amp;</span><span class=\"p\">)</span><span class=\"o\">&gt;</span> <span class=\"o\">&amp;&amp;</span><span class=\"n\">callback</span><span class=\"p\">)</span><span class=\"k\">override</span><span class=\"p\">;</span>\n    <span class=\"n\">PATH_LIST_BEGIN</span>\n    <span class=\"c1\">//list path definitions here;</span>\n    <span class=\"c1\">//PATH_ADD(&quot;/path&quot;,&quot;filter1&quot;,&quot;filter2&quot;,HttpMethod1,HttpMethod2...);</span>\n    <span class=\"n\">PATH_LIST_END</span>\n<span class=\"p\">};</span>\n</pre></div>\n</div>\n</div>\n<p>TestCtrl.cc is as follows:</p>\n<div class=\"literal-block-wrapper docutils container\" id=\"id3\">\n<div class=\"code-block-caption\"><span class=\"caption-text\"><em>TestCtrl.cc</em></span><a class=\"headerlink\" href=\"#id3\" title=\"Permalink to this code\">\u00b6</a></div>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">#include</span> <span class=\"cpf\">&quot;TestCtrl.h&quot;</span><span class=\"cp\"></span>\n<span class=\"kt\">void</span> <span class=\"n\">TestCtrl</span><span class=\"o\">::</span><span class=\"n\">asyncHandleHttpRequest</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpRequestPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">req</span><span class=\"p\">,</span>\n                                    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">function</span><span class=\"o\">&lt;</span><span class=\"kt\">void</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpResponsePtr</span> <span class=\"o\">&amp;</span><span class=\"p\">)</span><span class=\"o\">&gt;</span> <span class=\"o\">&amp;&amp;</span><span class=\"n\">callback</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"c1\">//write your application logic here</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n</div>\n<p>Let\u2019s edit the two files and let the controller handle the function response to a simple \u201cHello World!\u201d</p>\n<p>TestCtrl.h is as follows:</p>\n<div class=\"literal-block-wrapper docutils container\" id=\"id4\">\n<div class=\"code-block-caption\"><span class=\"caption-text\"><em>TestCtrl.h</em></span><a class=\"headerlink\" href=\"#id4\" title=\"Permalink to this code\">\u00b6</a></div>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">#pragma once</span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;drogon/HttpSimpleController.h&gt;</span><span class=\"cp\"></span>\n<span class=\"k\">using</span> <span class=\"k\">namespace</span> <span class=\"n\">drogon</span><span class=\"p\">;</span>\n<span class=\"k\">class</span> <span class=\"nc\">TestCtrl</span><span class=\"o\">:</span><span class=\"k\">public</span> <span class=\"n\">drogon</span><span class=\"o\">::</span><span class=\"n\">HttpSimpleController</span><span class=\"o\">&lt;</span><span class=\"n\">TestCtrl</span><span class=\"o\">&gt;</span>\n<span class=\"p\">{</span>\n<span class=\"k\">public</span><span class=\"o\">:</span>\n    <span class=\"k\">virtual</span> <span class=\"kt\">void</span> <span class=\"n\">asyncHandleHttpRequest</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpRequestPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">req</span><span class=\"p\">,</span>\n                                        <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">function</span><span class=\"o\">&lt;</span><span class=\"kt\">void</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpResponsePtr</span> <span class=\"o\">&amp;</span><span class=\"p\">)</span><span class=\"o\">&gt;</span> <span class=\"o\">&amp;&amp;</span><span class=\"n\">callback</span><span class=\"p\">)</span><span class=\"k\">override</span><span class=\"p\">;</span>\n    <span class=\"n\">PATH_LIST_BEGIN</span>\n    <span class=\"c1\">//list path definitions here;</span>\n    <span class=\"c1\">//PATH_ADD(&quot;/path&quot;,&quot;filter1&quot;,&quot;filter2&quot;,HttpMethod1,HttpMethod2...);</span>\n    <span class=\"n\">PATH_ADD</span><span class=\"p\">(</span><span class=\"s\">&quot;/&quot;</span><span class=\"p\">,</span><span class=\"n\">Get</span><span class=\"p\">,</span><span class=\"n\">Post</span><span class=\"p\">);</span>\n    <span class=\"n\">PATH_ADD</span><span class=\"p\">(</span><span class=\"s\">&quot;/test&quot;</span><span class=\"p\">,</span><span class=\"n\">Get</span><span class=\"p\">);</span>\n    <span class=\"n\">PATH_LIST_END</span>\n<span class=\"p\">};</span>\n</pre></div>\n</div>\n</div>\n<p>Use PATH_ADD to map processing functions on the two paths \u2018/\u2019 and \u2018/test\u2019 respectively, and adding constraints on these path.</p>\n<p>TestCtrl.cc is as follows:</p>\n<div class=\"literal-block-wrapper docutils container\" id=\"id5\">\n<div class=\"code-block-caption\"><span class=\"caption-text\"><em>TestCtrl.h</em></span><a class=\"headerlink\" href=\"#id5\" title=\"Permalink to this code\">\u00b6</a></div>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">#include</span> <span class=\"cpf\">&quot;TestCtrl.h&quot;</span><span class=\"cp\"></span>\n<span class=\"kt\">void</span> <span class=\"n\">TestCtrl</span><span class=\"o\">::</span><span class=\"n\">asyncHandleHttpRequest</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpRequestPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">req</span><span class=\"p\">,</span>\n                                    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">function</span><span class=\"o\">&lt;</span><span class=\"kt\">void</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpResponsePtr</span> <span class=\"o\">&amp;</span><span class=\"p\">)</span><span class=\"o\">&gt;</span> <span class=\"o\">&amp;&amp;</span><span class=\"n\">callback</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"c1\">//write your application logic here</span>\n    <span class=\"k\">auto</span> <span class=\"n\">resp</span><span class=\"o\">=</span><span class=\"n\">HttpResponse</span><span class=\"o\">::</span><span class=\"n\">newHttpResponse</span><span class=\"p\">();</span>\n    <span class=\"n\">resp</span><span class=\"o\">-&gt;</span><span class=\"n\">setStatusCode</span><span class=\"p\">(</span><span class=\"n\">k200OK</span><span class=\"p\">);</span>\n    <span class=\"n\">resp</span><span class=\"o\">-&gt;</span><span class=\"n\">setContentTypeCode</span><span class=\"p\">(</span><span class=\"n\">CT_TEXT_HTML</span><span class=\"p\">);</span>\n    <span class=\"n\">resp</span><span class=\"o\">-&gt;</span><span class=\"n\">setBody</span><span class=\"p\">(</span><span class=\"s\">&quot;Hello World!&quot;</span><span class=\"p\">);</span>\n    <span class=\"n\">callback</span><span class=\"p\">(</span><span class=\"n\">resp</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n</div>\n<p>Recompile this project with cmake, then run the target ./your_project_name:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nb\">cd</span> ../build\ncmake ..\nmake\n./your_project_name\n</pre></div>\n</div>\n<p>Typing <em>\u201chttp://localhost/\u201d</em> or <em>\u201chttp://localhost/test\u201d</em> in the browser address bar, and you will see \u201cHello World!\u201d in the browser.</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">Note: If your server both have static and dynamic resource, Drogon use dynamic resource first, In this example\uff0cthe respond of <a class=\"reference external\" href=\"http://localhost/\">http://localhost/</a> is Hello Word! in TestCtrl controller instead of Hello Drogon! in static file index.html.</p>\n</div>\n<p>We see that adding a controller to an application is very simple. You only need to add the corresponding source file. Even the main file does not need to be modified. This low-coupling design is very effective for web application development.</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">Note: Drogon has no restrictions to the location of the controllers source file, you could save it at the project directory also, even you could define new directory in the CMakeLists.txt, it is recommended to use the controllers directory for the convenience of management.</p>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["Controller-Introduction-en", "Controller Introduction", "N", "next"], ["Installation-en", "Installation", "P", "previous"]], "sourcename": "Quick-Start-en.rstd.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Quick Start</a><ul>\n<li><a class=\"reference internal\" href=\"#static-site\">Static Site</a></li>\n<li><a class=\"reference internal\" href=\"#dynamic-site\">Dynamic Site</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rstd", "current_page_name": "Quick-Start-en", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}