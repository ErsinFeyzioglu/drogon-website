
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=cp1252" />
    <title>&#25511;&#21046;&#22120; HttpSimpleController</title>
  
    <link rel="stylesheet" href="_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="next" title="HttpController &#25511;&#21046;&#22120;" href="Controller-HttpController-zh.html" />
    <link rel="prev" title="&#25511;&#21046;&#22120; &#31616;&#20171;" href="Controller-Introduction-zh.html" /> 
  </head><body>
    <div id="content">
      <div class="header">
        <h1 class="heading"><a href="index.html"
          title="back to the documentation overview"><span>&#25511;&#21046;&#22120; HttpSimpleController</span></a></h1>
      </div>
      <div class="relnav" role="navigation" aria-label="related navigation">
        <a href="Controller-Introduction-zh.html">&laquo; &#25511;&#21046;&#22120; &#31616;&#20171;</a> |
        <a href="#">&#25511;&#21046;&#22120; HttpSimpleController</a>
        | <a href="Controller-HttpController-zh.html">HttpController &#25511;&#21046;&#22120; &raquo;</a>
      </div>
      <div id="contentwrapper">
        
  <div class="section" id="httpsimplecontroller">
<h1>&#25511;&#21046;&#22120; HttpSimpleController</h1>
<p>&#21487;&#20197;&#30001;*drogon_ctl*&#21629;&#20196;&#34892;&#24037;&#20855;&#24555;&#36895;&#29983;&#25104;&#22522;&#20110;*HttpSimpleController*&#30340;&#33258;&#23450;&#20041;&#31867;&#30340;&#28304;&#25991;&#20214;&#65292;&#21629;&#20196;&#26684;&#24335;&#22914;&#19979;&#65306;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>drogon_ctl create controller &lt;<span class="o">[</span>namespace::<span class="o">]</span>class_name&gt;
</pre></div>
</div>
<p>&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#21517;&#31216;&#20026;*TestCtrl*&#30340;&#25511;&#21046;&#22120;&#65306;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>drogon_ctl create controller TestCtrl
</pre></div>
</div>
<p>&#21487;&#20197;&#30475;&#21040;&#65292;&#30446;&#24405;&#19979;&#26032;&#22686;&#21152;&#20102;&#20004;&#20010;&#25991;&#20214;&#65292;TestCtrl.h&#21644;TestCtrl.cc&#65292;&#19979;&#38754;&#38416;&#36848;&#19968;&#19979;&#36825;&#20004;&#20010;&#25991;&#20214;&#12290;</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><strong>TestCtrl.h&#65306;</strong></span></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma once</span>
<span class="cp">#include</span> <span class="cpf">&lt;drogon/HttpSimpleController.h&gt;</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">drogon</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">TestCtrl</span><span class="o">:</span><span class="k">public</span> <span class="n">drogon</span><span class="o">::</span><span class="n">HttpSimpleController</span><span class="o">&lt;</span><span class="n">TestCtrl</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">asyncHandleHttpRequest</span><span class="p">(</span><span class="k">const</span> <span class="n">HttpRequestPtr</span> <span class="o">&amp;</span><span class="n">req</span><span class="p">,</span>
                                        <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span> <span class="p">(</span><span class="k">const</span> <span class="n">HttpResponsePtr</span> <span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span> <span class="o">&amp;&amp;</span><span class="n">callback</span><span class="p">)</span><span class="k">override</span><span class="p">;</span>
    <span class="n">PATH_LIST_BEGIN</span>
    <span class="c1">//list path definitions here;</span>
    <span class="c1">//PATH_ADD(&quot;/path&quot;,&quot;filter1&quot;,&quot;filter2&quot;,HttpMethod1,HttpMethod2...);</span>
    <span class="n">PATH_LIST_END</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><strong>TestCtrl.cc</strong></span></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;TestCtrl.h&quot;</span><span class="cp"></span>
<span class="kt">void</span> <span class="n">TestCtrl</span><span class="o">::</span><span class="n">asyncHandleHttpRequest</span><span class="p">(</span><span class="k">const</span> <span class="n">HttpRequestPtr</span> <span class="o">&amp;</span><span class="n">req</span><span class="p">,</span>
                                    <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span> <span class="p">(</span><span class="k">const</span> <span class="n">HttpResponsePtr</span> <span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span> <span class="o">&amp;&amp;</span><span class="n">callback</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//write your application logic here</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>&#27599;&#20010;HttpSimpleController&#31867;&#21482;&#33021;&#23450;&#20041;&#19968;&#20010;Http&#35831;&#27714;&#22788;&#29702;&#20989;&#25968;(handler)&#65292;&#32780;&#19988;&#36890;&#36807;&#34394;&#20989;&#25968;&#37325;&#36733;&#23450;&#20041;&#12290;</p>
<p>&#20174;URL&#36335;&#24452;&#21040;&#22788;&#29702;&#20989;&#25968;&#30340;&#36335;&#30001;(&#25110;&#31216;&#26144;&#23556;)&#30001;&#23439;&#23436;&#25104;&#65292;&#21487;&#20197;&#29992;*PATH_ADD*&#23439;&#28155;&#21152;&#22810;&#37325;&#36335;&#24452;&#26144;&#23556;&#65292;&#25152;&#26377;*PATH_ADD*&#35821;&#21477;&#24212;&#22841;&#22312;*PATH_LIST_BEGIN*&#21644;*PATH_LIST_END*&#23439;&#35821;&#21477;&#20043;&#38388;&#12290;</p>
<p>&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;&#26144;&#23556;&#30340;&#36335;&#24452;,&#36335;&#24452;&#21518;&#38754;&#30340;&#21442;&#25968;&#26159;&#23545;&#36825;&#20010;&#36335;&#24452;&#30340;&#32422;&#26463;&#65292;&#30446;&#21069;&#25903;&#25345;&#20004;&#31181;&#32422;&#26463;&#65292;&#19968;&#31181;&#26159;HttpMethod&#31867;&#22411;&#65292;&#34920;&#31034;&#35813;&#36335;&#24452;&#20801;&#35768;&#20351;&#29992;&#30340;Http&#26041;&#27861;&#65292;&#21487;&#20197;&#37197;&#32622;&#38646;&#20010;&#25110;&#22810;&#20010;&#65292;&#19968;&#31181;&#26159;HttpFilter&#31867;&#30340;&#21517;&#23383;&#65292;&#36825;&#31181;&#23545;&#35937;&#25191;&#34892;&#29305;&#23450;&#30340;&#36807;&#28388;&#25805;&#20316;&#65292;&#20063;&#21487;&#20197;&#37197;&#32622;0&#20010;&#25110;&#22810;&#20010;&#65292;&#20004;&#31181;&#31867;&#22411;&#27809;&#26377;&#39034;&#24207;&#35201;&#27714;&#65292;&#26694;&#26550;&#20250;&#22788;&#29702;&#22909;&#31867;&#22411;&#30340;&#21305;&#37197;&#12290;&#20851;&#20110;Filter&#65292;&#35831;&#21442;&#38405;&#36807;&#28388;&#22120;Filter.</p>
<p>&#29992;&#25143;&#21487;&#20197;&#25226;&#21516;&#19968;&#20010;Simple Controller&#27880;&#20876;&#21040;&#22810;&#20010;&#36335;&#24452;&#19978;&#65292;&#20063;&#21487;&#20197;&#22312;&#21516;&#19968;&#20010;&#36335;&#24452;&#19978;&#27880;&#20876;&#22810;&#20010;Simple Controller&#65288;&#36890;&#36807;HTTP method&#21306;&#20998;&#65289;&#12290;</p>
<p>&#20320;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;HttpResponse&#31867;&#30340;&#21464;&#37327;&#65292;&#28982;&#21518;&#20351;&#29992;callback()&#36820;&#22238;&#36825;&#20010;&#21464;&#37327;&#21363;&#21487;:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//write your application logic here</span>
<span class="k">auto</span> <span class="n">resp</span><span class="o">=</span><span class="n">HttpResponse</span><span class="o">::</span><span class="n">newHttpResponse</span><span class="p">();</span>
<span class="n">resp</span><span class="o">-&gt;</span><span class="n">setStatusCode</span><span class="p">(</span><span class="n">k200OK</span><span class="p">);</span>
<span class="n">resp</span><span class="o">-&gt;</span><span class="n">setContentTypeCode</span><span class="p">(</span><span class="n">CT_TEXT_HTML</span><span class="p">);</span>
<span class="n">resp</span><span class="o">-&gt;</span><span class="n">setBody</span><span class="p">(</span><span class="s">&quot;Your Page Contents&quot;</span><span class="p">);</span>
<span class="n">callback</span><span class="p">(</span><span class="n">resp</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>&#19978;&#36848;&#36335;&#24452;&#21040;&#22788;&#29702;&#20989;&#25968;&#30340;&#26144;&#23556;&#26159;&#22312;&#32534;&#35793;&#26399;&#23436;&#25104;&#30340;&#65292;&#20107;&#23454;&#19978;&#65292;drogon&#26694;&#26550;&#20063;&#25552;&#20379;&#20102;&#36816;&#34892;&#26399;&#23436;&#25104;&#26144;&#23556;&#30340;&#25509;&#21475;&#65292;&#36816;&#34892;&#26399;&#26144;&#23556;&#21487;&#20197;&#35753;&#29992;&#25143;&#36890;&#36807;&#37197;&#32622;&#25991;&#20214;&#25110;&#20854;&#23427;&#29992;&#25143;&#25509;&#21475;&#23436;&#25104;&#26144;&#23556;&#25110;&#20462;&#25913;&#26144;&#23556;&#20851;&#31995;&#32780;&#26080;&#38656;&#37325;&#26032;&#32534;&#35793;&#36825;&#20010;&#31243;&#24207;(&#20986;&#20110;&#24615;&#33021;&#30340;&#32771;&#34385;&#65292;&#31105;&#27490;&#22312;&#36816;&#34892;app().run()&#20043;&#21518;&#20877;&#27880;&#20876;&#20219;&#20309;&#26144;&#23556;)&#12290;</strong></p>
</div>


      </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, an-tao.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.
    </div>
  </body>
</html>