
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=cp1252" />
    <title>&#24615;&#33021;&#27979;&#35797;</title>
  
    <link rel="stylesheet" href="_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="next" title="Coz" href="Coz-zh.html" />
    <link rel="prev" title="AOP&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;" href="AOP-Aspect-Oriented-Programming-zh.html" /> 
  </head><body>
    <div id="content">
      <div class="header">
        <h1 class="heading"><a href="index.html"
          title="back to the documentation overview"><span>&#24615;&#33021;&#27979;&#35797;</span></a></h1>
      </div>
      <div class="relnav" role="navigation" aria-label="related navigation">
        <a href="AOP-Aspect-Oriented-Programming-zh.html">&laquo; AOP&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;</a> |
        <a href="#">&#24615;&#33021;&#27979;&#35797;</a>
        | <a href="Coz-zh.html">Coz &raquo;</a>
      </div>
      <div id="contentwrapper">
        <div id="toc" role="navigation" aria-label="table of contents navigation">
          <h3>Table Of Contents</h3>
          <ul>
<li><a class="reference internal" href="#">&#24615;&#33021;&#27979;&#35797;</a><ul>
<li><a class="reference internal" href="#id2">&#27979;&#35797;&#29615;&#22659;</a></li>
<li><a class="reference internal" href="#id3">&#27979;&#35797;&#26041;&#26696;&#21644;&#32467;&#26524;</a></li>
</ul>
</li>
</ul>

        </div>
        
  <div class="section" id="id1">
<h1>&#24615;&#33021;&#27979;&#35797;</h1>
<p>&#20316;&#20026;C++&#30340;Http&#24212;&#29992;&#26694;&#26550;&#65292;&#24615;&#33021;&#24212;&#35813;&#26159;&#20851;&#27880;&#30340;&#37325;&#28857;&#20043;&#19968;&#65292;&#26412;&#33410;&#20171;&#32461;Drogon&#30340;&#31616;&#21333;&#27979;&#35797;&#21644;&#25104;&#32489;&#65307;</p>
<div class="section" id="id2">
<h2>&#27979;&#35797;&#29615;&#22659;</h2>
<blockquote>
<div><ul class="simple">
<li>&#31995;&#32479;&#26159;Linux CentOS 7.4&#65307;</li>
<li>&#35774;&#22791;&#26159;Dell&#26381;&#21153;&#22120;&#65292;CPU&#26159;&#20004;&#39063;Intel(R) Xeon(R) CPU E5-2670 &#64; 2.60GHz&#65292;16&#26680;32&#32447;&#31243;&#65307;</li>
<li>&#20869;&#23384;64GB&#65307;</li>
<li>gcc&#29256;&#26412;7.3.0&#65307;</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id3">
<h2>&#27979;&#35797;&#26041;&#26696;&#21644;&#32467;&#26524;</h2>
<p>&#25105;&#20204;&#21482;&#26159;&#20026;&#20102;&#27979;&#35797;drogon&#26694;&#26550;&#30340;&#24615;&#33021;&#65292;&#22240;&#32780;&#35201;&#23613;&#37327;&#31616;&#21270;controller&#30340;&#22788;&#29702;&#65292;&#25105;&#20204;&#21482;&#20570;&#20102;&#19968;&#20010;HttpSimpleController&#65292;&#27880;&#20876;&#21040;*/benchmark*&#36335;&#24452;&#19978;&#12290;controller&#23545;&#20219;&#20309;&#35831;&#27714;&#37117;&#36820;&#22238;*&lt;p&gt;Hello, world!&lt;/p&gt;*&#12290;&#35774;&#32622;drogon&#32447;&#31243;&#25968;&#20026;16&#12290;handler&#20989;&#25968;&#30340;&#20195;&#30721;&#22914;&#19979;, &#20320;&#21487;&#20197;&#22312;*drogon/examples/benchmark*&#30446;&#24405;&#25214;&#21040;&#36825;&#20123;&#28304;&#30721;&#65306;</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="n">BenchmarkCtrl</span><span class="o">::</span><span class="n">asyncHandleHttpRequest</span><span class="p">(</span><span class="k">const</span> <span class="n">HttpRequestPtr</span> <span class="o">&amp;</span><span class="n">req</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span> <span class="p">(</span><span class="k">const</span> <span class="n">HttpResponsePtr</span> <span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span> <span class="o">&amp;&amp;</span><span class="n">callback</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//write your application logic here</span>
    <span class="k">auto</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="o">::</span><span class="n">newHttpResponse</span><span class="p">();</span>
    <span class="n">resp</span><span class="o">-&gt;</span><span class="n">setBody</span><span class="p">(</span><span class="s">&quot;&lt;p&gt;Hello, world!&lt;/p&gt;&quot;</span><span class="p">);</span>
    <span class="n">resp</span><span class="o">-&gt;</span><span class="n">setExpiredTime</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">callback</span><span class="p">(</span><span class="n">resp</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#23545;&#27604;&#65292;&#25105;&#36873;&#21462;&#20102;nginx&#26469;&#20570;&#23545;&#27604;&#27979;&#35797;&#65292;&#20351;&#29992;nginx+module&#28304;&#30721;&#32534;&#35793;&#30340;&#26041;&#24335;&#65292;&#20889;&#20102;&#19968;&#20010;hello_world_module&#65292;&#27979;&#35797;&#26102;nginx&#30340;worker_processes&#21442;&#25968;&#35774;&#20026;16&#12290;</p>
<p>&#27979;&#35797;&#24037;&#20855;&#26159;&#19968;&#20010;&#24615;&#33021;&#19981;&#38169;&#30340;HTTP&#21387;&#21147;&#27979;&#35797;&#24037;&#20855;*httpress*&#12290;</p>
<p>&#25105;&#20204;&#35843;&#25972;httpress&#30340;&#21442;&#25968;&#65292;&#27599;&#32452;&#21442;&#25968;&#27979;&#35797;&#20116;&#27425;&#65292;&#35760;&#24405;&#27599;&#31186;&#22788;&#29702;&#35831;&#27714;&#25968;&#30340;&#26368;&#22823;&#20540;&#21644;&#26368;&#23567;&#20540;&#12290;&#27979;&#35797;&#32467;&#26524;&#22914;&#19979;&#34920;&#65306;</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="47%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#21629;&#20196;&#34892;</th>
<th class="head">&#35828;&#26126;</th>
<th class="head">Drogon(&#21315;QPS)</th>
<th class="head">nginx(&#21315;QPS)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>httpress -c 100 -n 1000000 -t 16 -k -q URL</td>
<td>100&#36830;&#25509;&#65292;100&#19975;&#35831;&#27714;&#65292;16&#32447;&#31243;&#65292;Keep-Alive</td>
<td>561/552</td>
<td>330/329</td>
</tr>
<tr class="row-odd"><td>httpress -c 100 -n 1000000 -t 12 -q URL</td>
<td>100&#36830;&#25509;&#65292;100&#19975;&#35831;&#27714;&#65292;12&#32447;&#31243;&#65292;&#19968;&#27425;&#35831;&#27714;&#19968;&#27425;&#36830;&#25509;</td>
<td>140/135</td>
<td>31/49</td>
</tr>
<tr class="row-even"><td>httpress -c 1000 -n 1000000 -t 16 -k -q URL</td>
<td>1000&#36830;&#25509;&#65292;100&#19975;&#35831;&#27714;&#65292;16&#32447;&#31243;&#65292;Keep-Alive</td>
<td>573/565</td>
<td>333/327</td>
</tr>
<tr class="row-odd"><td>httpress -c 1000 -n 1000000 -t 16 -q URL</td>
<td>1000&#36830;&#25509;&#65292;100&#19975;&#35831;&#27714;&#65292;16&#32447;&#31243;&#65292;&#19968;&#27425;&#35831;&#27714;&#19968;&#27425;&#36830;&#25509;</td>
<td>155/143</td>
<td>52/50</td>
</tr>
<tr class="row-even"><td>httpress -c 10000 -n 4000000 -t 16 -k -q URL</td>
<td>10000&#36830;&#25509;&#65292;400&#19975;&#35831;&#27714;&#65292;16&#32447;&#31243;&#65292;Keep-Alive</td>
<td>512/508</td>
<td>316/314</td>
</tr>
<tr class="row-odd"><td>httpress -c 10000 -n 1000000 -t 16 -q URL</td>
<td>10000&#36830;&#25509;&#65292;100&#19975;&#35831;&#27714;&#65292;16&#32447;&#31243;&#65292;&#19968;&#27425;&#35831;&#27714;&#19968;&#27425;&#36830;&#25509;</td>
<td>143/141</td>
<td>43/40</td>
</tr>
</tbody>
</table>
<p>&#21487;&#20197;&#30475;&#21040;&#65292;&#22312;&#23458;&#25143;&#31471;&#20351;&#29992;Keep-Alive&#36873;&#39033;&#65292;&#22312;&#19968;&#20010;&#36830;&#25509;&#21487;&#20197;&#21457;&#36865;&#22810;&#20010;&#35831;&#27714;&#30340;&#24773;&#20917;&#19979;&#65292;drogon&#27599;&#31186;&#21487;&#20197;&#22788;&#29702;50&#22810;&#19975;&#27425;&#35831;&#27714;&#65292;&#36825;&#20010;&#25104;&#32489;&#26159;&#30456;&#24403;&#19981;&#38169;&#30340;&#12290;&#27599;&#27425;&#35831;&#27714;&#37117;&#21457;&#36215;&#19968;&#27425;&#36830;&#25509;&#30340;&#24773;&#20917;&#19979;&#65292;CPU&#20250;&#28040;&#32791;&#22312;TCP&#24314;&#31435;&#21644;&#26029;&#24320;&#31561;&#29615;&#33410;&#65292;&#21534;&#21520;&#37327;&#20250;&#19979;&#38477;&#33267;&#27599;&#31186;14&#19975;&#27425;&#35831;&#27714;&#65292;&#36825;&#20063;&#26159;&#27491;&#24120;&#30340;&#12290;drogon&#23545;&#27604;nginx&#30340;&#25104;&#32489;&#22788;&#20110;&#26126;&#26174;&#20248;&#21183;&#65292;&#20063;&#35768;&#26159;&#30001;&#20110;nginx&#37197;&#32622;&#19981;&#24403;&#26410;&#33021;&#21457;&#25381;&#23427;&#30340;&#26368;&#22823;&#21534;&#21520;&#37327;&#65292;&#22914;&#26524;&#21738;&#20301;&#39640;&#25163;&#20570;&#20102;&#26356;&#22909;&#30340;&#27979;&#35797;&#65292;&#27426;&#36814;&#25351;&#27491;&#12290;</p>
<p>&#19979;&#22270;&#26159;&#26576;&#19968;&#27425;&#27979;&#35797;&#30340;&#25130;&#22270;&#65306;</p>
<p>&#27979;&#35797;&#25130;&#22270;</p>
</div>
</div>


      </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, an-tao.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.
    </div>
  </body>
</html>