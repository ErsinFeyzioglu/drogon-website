
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=cp1252" />
    <title>AOP&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;</title>
  
    <link rel="stylesheet" href="_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="next" title="&#24615;&#33021;&#27979;&#35797;" href="Benchmarks-zh.html" />
    <link rel="prev" title="drogon_ctl&#21629;&#20196;" href="Drogon_ctl-Command-zh.html" /> 
  </head><body>
    <div id="content">
      <div class="header">
        <h1 class="heading"><a href="index.html"
          title="back to the documentation overview"><span>AOP&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;</span></a></h1>
      </div>
      <div class="relnav" role="navigation" aria-label="related navigation">
        <a href="Drogon_ctl-Command-zh.html">&laquo; drogon_ctl&#21629;&#20196;</a> |
        <a href="#">AOP&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;</a>
        | <a href="Benchmarks-zh.html">&#24615;&#33021;&#27979;&#35797; &raquo;</a>
      </div>
      <div id="contentwrapper">
        <div id="toc" role="navigation" aria-label="table of contents navigation">
          <h3>Table Of Contents</h3>
          <ul>
<li><a class="reference internal" href="#">AOP&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;</a><ul>
<li><a class="reference internal" href="#id1">&#20869;&#24314;&#25554;&#20837;&#28857;</a></li>
<li><a class="reference internal" href="#id2">AOP&#31034;&#24847;&#22270;</a></li>
</ul>
</li>
</ul>

        </div>
        
  <div class="section" id="aop">
<h1>AOP&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;</h1>
<p>AOP(&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;)&#26159;&#23454;&#29616;&#31243;&#24207;&#21151;&#33021;&#30340;&#32479;&#19968;&#32500;&#25252;&#30340;&#19968;&#31181;&#25216;&#26415;&#12290;&#21033;&#29992;AOP&#21487;&#20197;&#23545;&#19994;&#21153;&#36923;&#36753;&#30340;&#21508;&#20010;&#37096;&#20998;&#36827;&#34892;&#38548;&#31163;&#65292;&#20174;&#32780;&#20351;&#24471;&#19994;&#21153;&#36923;&#36753;&#21508;&#37096;&#20998;&#20043;&#38388;&#30340;&#32806;&#21512;&#24230;&#38477;&#20302;&#65292;&#25552;&#39640;&#31243;&#24207;&#30340;&#21487;&#37325;&#29992;&#24615;&#65292;&#21516;&#26102;&#25552;&#39640;&#20102;&#24320;&#21457;&#30340;&#25928;&#29575;&#12290;</p>
<p>&#38480;&#20110;C++&#35821;&#35328;&#30340;&#29305;&#24615;&#65292;Drogon&#27809;&#26377;&#25552;&#20379;&#20687;Spring&#37027;&#26679;&#28789;&#27963;&#30340;AOP&#26041;&#26696;&#65292;&#32780;&#26159;&#19968;&#31181;&#31616;&#21333;&#30340;AOP&#65292;&#25152;&#26377;&#25554;&#20837;&#28857;&#37117;&#26159;&#20869;&#24314;&#20110;&#26694;&#26550;&#20013;&#30340;&#65292;&#29992;&#25143;&#21487;&#20197;&#36890;&#36807;&#26694;&#26550;&#30340;AOP&#31995;&#21015;&#25509;&#21475;&#27880;&#20876;&#29305;&#23450;&#30340;&#22788;&#29702;&#31243;&#24207;&#21040;&#25554;&#20837;&#28857;&#19978;&#12290;</p>
<div class="section" id="id1">
<h2>&#20869;&#24314;&#25554;&#20837;&#28857;</h2>
<p>Drogon&#25552;&#20379;&#20102;7&#20010;&#25554;&#20837;&#28857;&#20379;&#29992;&#25143;&#20351;&#29992;&#65292;&#24403;&#24212;&#29992;&#31243;&#24207;&#36816;&#34892;&#33267;&#25554;&#20837;&#28857;&#30340;&#26102;&#20505;&#65292;&#20250;&#20381;&#27425;&#35843;&#29992;&#29992;&#25143;&#27880;&#20876;&#30340;&#22788;&#29702;&#31243;&#24207;&#65288;Advice&#65289;&#12290;&#20851;&#20110;&#25554;&#20837;&#28857;&#30340;&#35828;&#26126;&#22914;&#19979;&#65306;</p>
<blockquote>
<div><ul class="simple">
<li>Beginning: &#39038;&#21517;&#24605;&#20041;&#65292;&#35813;&#25554;&#20837;&#28857;&#22312;&#31243;&#24207;&#24320;&#22987;&#26102;&#21040;&#36798;&#65292;&#20855;&#20307;&#22320;&#35828;&#65292;&#25152;&#26377;&#27880;&#20876;&#22312;&#36825;&#20010;&#25554;&#20837;&#28857;&#19978;&#30340;&#22788;&#29702;&#31243;&#24207;&#20250;&#22312;app().run()&#26041;&#27861;&#36816;&#34892;&#23436;&#27605;&#21518;&#31435;&#21363;&#25191;&#34892;&#12290;&#22312;&#36825;&#20010;&#25554;&#20837;&#28857;&#19978;&#65292;&#25152;&#26377;&#30340;controller&#65292;filter&#65292;plugin&#65292;database client&#37117;&#26500;&#24314;&#23436;&#27605;&#20102;&#65292;&#29992;&#25143;&#21487;&#20197;&#22312;&#36825;&#37324;&#24471;&#21040;&#24819;&#35201;&#30340;&#23545;&#35937;&#24341;&#29992;&#25110;&#36827;&#34892;&#19968;&#20123;&#20854;&#20182;&#21021;&#22987;&#21270;&#24037;&#20316;&#65292;&#35813;&#25554;&#20837;&#28857;&#19978;&#30340;advice&#21482;&#36816;&#34892;&#19968;&#27425;&#65292;&#35843;&#29992;&#31867;&#22411;&#26159;*void()*&#65292;&#27880;&#20876;&#25509;&#21475;&#26159;*registerBeginningAdvice*;</li>
<li>NewConnection: &#27880;&#20876;&#21040;&#36825;&#20010;&#25554;&#20837;&#28857;&#19978;&#30340;&#22788;&#29702;&#31243;&#24207;&#20250;&#22312;&#27599;&#20010;&#26032;TCP&#36830;&#25509;&#24314;&#31435;&#26102;&#36816;&#34892;&#65292;Advice&#30340;&#35843;&#29992;&#31867;&#22411;&#26159;*bool(const trantor::InetAddress &amp;, const trantor::InetAddress &amp;)*&#65292;&#20854;&#20013;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;TCP&#36830;&#25509;&#30340;&#36828;&#31471;&#22320;&#22336;&#65292;&#31532;&#20108;&#20010;&#21442;&#25968;&#26159;&#26412;&#22320;&#22320;&#22336;&#65292;&#27880;&#24847;&#36820;&#22238;&#31867;&#22411;&#26159;bool&#65292;&#22914;&#26524;&#29992;&#25143;&#36820;&#22238;false&#65292;&#30456;&#24212;&#30340;&#36830;&#25509;&#23558;&#34987;&#26029;&#24320;&#12290;&#27880;&#20876;&#30340;&#25509;&#21475;&#26159;*registerNewConnectionAdvice*;</li>
<li>HttpResponseCreation: &#27880;&#20876;&#21040;&#36825;&#20010;&#25554;&#20837;&#28857;&#19978;&#30340;&#22788;&#29702;&#31243;&#24207;&#20250;&#22312;&#27599;&#20010;HTTP Response&#23545;&#35937;&#21019;&#24314;&#26102;&#36816;&#34892;&#65292;Advice&#30340;&#35843;&#29992;&#31867;&#22411;&#26159;*void(const HttpResponsePtr &amp;)*&#65292;&#20854;&#20013;&#30340;&#21442;&#25968;&#23601;&#26159;&#26032;&#21019;&#24314;&#30340;&#23545;&#35937;&#65292;&#29992;&#25143;&#21487;&#20197;&#22312;&#36825;&#20010;&#22788;&#29702;&#31243;&#24207;&#20013;&#23545;&#25152;&#26377;Response&#36827;&#34892;&#19968;&#20123;&#32479;&#19968;&#30340;&#25805;&#20316;&#65292;&#27604;&#22914;&#28155;&#21152;&#26576;&#20010;&#29305;&#27530;&#30340;header&#31561;&#65292;&#36825;&#20010;&#25554;&#20837;&#28857;&#20250;&#24433;&#21709;&#25152;&#26377;&#30340;Response&#65292;&#21253;&#25324;404&#25110;&#20219;&#20309;drogon&#20869;&#37096;&#20135;&#29983;&#30340;&#38169;&#35823;&#21709;&#24212;&#65292;&#20063;&#21253;&#25324;&#24212;&#29992;&#20135;&#29983;&#30340;&#25152;&#26377;&#21709;&#24212;&#12290;&#27880;&#20876;&#30340;&#25509;&#21475;&#26159;*registerHttpResponseCreationAdvice*;</li>
<li>Sync: &#36825;&#20010;&#25554;&#20837;&#28857;&#30340;&#20301;&#32622;&#22312;Http&#35831;&#27714;&#22788;&#29702;&#30340;&#26368;&#21069;&#31471;&#65292;&#29992;&#25143;&#21487;&#20197;&#22312;&#36825;&#37324;&#36890;&#36807;&#36820;&#22238;&#19968;&#20010;&#38750;&#31354;&#30340;Response&#23545;&#35937;&#26469;&#25318;&#25130;&#36825;&#20010;&#35831;&#27714;&#65292;Advice&#35843;&#29992;&#31867;&#22411;&#26159;*HttpRequestPtr(const HttpRequestPtr &amp;)*&#65292;&#27880;&#20876;&#25509;&#21475;&#26159;*registerSyncAdvice*;</li>
<li>Pre-Routing: &#36825;&#20010;&#25554;&#20837;&#28857;&#30340;&#20301;&#32622;&#22312;&#26694;&#26550;&#20026;&#23458;&#25143;&#31471;&#30340;&#35831;&#27714;&#23547;&#25214;&#30456;&#24212;&#30340;&#22788;&#29702;&#22120;&#20043;&#21069;&#65292;Advice&#30340;&#35843;&#29992;&#31867;&#22411;&#26377;&#20004;&#20010;&#65292;<em>void(const HttpRequestPtr &amp;,AdviceCallback &amp;&amp;,AdviceChainCallback &amp;&amp;)*&#21644;*void(const HttpRequestPtr &amp;)</em>, &#21069;&#19968;&#20010;&#21644;Filter&#30340;doFilter&#26041;&#27861;&#30340;&#35843;&#29992;&#31867;&#22411;&#23436;&#20840;&#19968;&#33268;&#65292;&#23454;&#38469;&#19978;&#65292;&#23427;&#20204;&#30340;&#36816;&#34892;&#26041;&#24335;&#20063;&#26159;&#19968;&#26679;&#30340;&#65288;&#35831;&#21442;&#32771;&#36807;&#28388;&#22120;&#65289;&#65292;&#29992;&#25143;&#21487;&#20197;&#36890;&#36807;&#36825;&#31181;Advice&#25318;&#25130;&#23458;&#25143;&#31471;&#35831;&#27714;&#25110;&#32773;&#35753;&#23427;&#36890;&#36807;&#65292;&#21518;&#19968;&#31181;&#35843;&#29992;&#31867;&#22411;&#27809;&#26377;&#25318;&#25130;&#33021;&#21147;&#65292;&#19981;&#36807;&#28040;&#32791;&#26356;&#20302;&#65292;&#22914;&#26524;&#29992;&#25143;&#19981;&#25171;&#31639;&#25318;&#25130;&#65292;&#35831;&#36873;&#25321;&#36825;&#31181;Advice&#27880;&#20876;&#12290;&#27880;&#20876;&#30340;&#25509;&#21475;&#26159;*registerPreRoutingAdvice*;</li>
<li>Post-Routing: &#36825;&#20010;&#25554;&#20837;&#28857;&#30340;&#20301;&#32622;&#22312;&#25214;&#21040;&#22788;&#29702;&#22120;&#20043;&#21518;&#21644;HTTP&#26041;&#27861;&#26816;&#27979;&#21450;&#36807;&#28388;&#22120;&#22788;&#29702;&#20043;&#21069;&#65292;Advice&#30340;&#35843;&#29992;&#31867;&#22411;&#21644;&#19978;&#20010;&#25554;&#20837;&#28857;&#19968;&#33268;&#65292;&#27880;&#20876;&#25509;&#21475;&#26159;*registerPostRoutingAdvice*;</li>
<li>Pre-Handling: &#36825;&#20010;&#25554;&#20837;&#28857;&#30340;&#20301;&#32622;&#22312;&#36890;&#36807;&#20102;&#25152;&#26377;&#36807;&#28388;&#22120;&#20043;&#21518;&#21644;&#22788;&#29702;&#22120;&#22788;&#29702;&#20043;&#21069;&#65292;Advice&#30340;&#35843;&#29992;&#31867;&#22411;&#21644;&#19978;&#20010;&#25554;&#20837;&#28857;&#19968;&#33268;&#65292;&#27880;&#20876;&#25509;&#21475;&#26159;*registerPreHandlingAdvice*;</li>
<li>Post-Handling: &#36825;&#20010;&#25554;&#20837;&#28857;&#30340;&#20301;&#32622;&#22312;&#22788;&#29702;&#22120;&#22788;&#29702;&#23436;&#25104;&#29983;&#25104;Response&#20043;&#21518;&#21644;&#21457;&#36865;&#32473;&#23458;&#25143;&#31471;&#20043;&#21069;&#65292;Advice&#30340;&#35843;&#29992;&#31867;&#22411;&#26159;*void(const HttpRequestPtr &amp;, const HttpResponsePtr &amp;)*&#65292;&#27880;&#20876;&#25509;&#21475;&#26159;*registerPostHandlingAdvice*;</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id2">
<h2>AOP&#31034;&#24847;&#22270;</h2>
<p>&#19979;&#22270;&#23637;&#31034;&#20102;&#19978;&#36848;&#30340;&#21518;&#38754;&#22235;&#20010;&#25554;&#20837;&#28857;&#22312;HTTP Request&#22788;&#29702;&#27969;&#31243;&#20013;&#30340;&#20301;&#32622;&#65292;&#20854;&#20013;&#30340;&#32418;&#33394;&#22278;&#28857;&#20195;&#34920;&#25554;&#20837;&#28857;&#65292;&#32511;&#33394;&#30340;&#31661;&#22836;&#36335;&#24452;&#37117;&#20195;&#34920;&#24322;&#27493;&#35843;&#29992;&#12290;</p>
</div>
</div>


      </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, an-tao.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.
    </div>
  </body>
</html>