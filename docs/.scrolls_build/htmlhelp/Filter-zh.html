
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=cp1252" />
    <title>&#36807;&#28388;&#22120;</title>
  
    <link rel="stylesheet" href="_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="next" title="&#35270;&#22270;" href="View-zh.html" />
    <link rel="prev" title="&#25511;&#21046;&#22120; WebSocketController" href="Controller-WebSocketController-zh.html" /> 
  </head><body>
    <div id="content">
      <div class="header">
        <h1 class="heading"><a href="index.html"
          title="back to the documentation overview"><span>&#36807;&#28388;&#22120;</span></a></h1>
      </div>
      <div class="relnav" role="navigation" aria-label="related navigation">
        <a href="Controller-WebSocketController-zh.html">&laquo; &#25511;&#21046;&#22120; WebSocketController</a> |
        <a href="#">&#36807;&#28388;&#22120;</a>
        | <a href="View-zh.html">&#35270;&#22270; &raquo;</a>
      </div>
      <div id="contentwrapper">
        <div id="toc" role="navigation" aria-label="table of contents navigation">
          <h3>Table Of Contents</h3>
          <ul>
<li><a class="reference internal" href="#">&#36807;&#28388;&#22120;</a><ul>
<li><a class="reference internal" href="#id2">&#20869;&#32622;&#36807;&#28388;&#22120;</a></li>
<li><a class="reference internal" href="#id3">&#33258;&#23450;&#20041;&#36807;&#28388;&#22120;</a></li>
<li><a class="reference internal" href="#id4">&#36807;&#28388;&#22120;&#30340;&#27880;&#20876;</a></li>
</ul>
</li>
</ul>

        </div>
        
  <div class="section" id="id1">
<h1>&#36807;&#28388;&#22120;</h1>
<p>&#36807;&#28388;&#22120;(filter)&#21487;&#20197;&#24110;&#21161;&#29992;&#25143;&#25552;&#39640;&#32534;&#31243;&#25928;&#29575;&#65292;&#22312;HttpController&#30340;&#20363;&#23376;&#20013;&#65292;getInfo&#26041;&#27861;&#22312;&#36820;&#22238;&#29992;&#25143;&#20449;&#24687;&#20043;&#21069;&#24212;&#35813;&#20808;&#26657;&#39564;&#29992;&#25143;&#26159;&#21542;&#30331;&#24405;&#65292;&#25105;&#20204;&#25226;&#36825;&#20010;&#36923;&#36753;&#20889;&#22312;getInfo&#26041;&#27861;&#37324;&#24403;&#28982;&#26159;&#21487;&#20197;&#30340;&#65292;&#20294;&#26159;&#65292;&#24456;&#26174;&#28982;&#65292;&#26657;&#39564;&#29992;&#25143;&#30331;&#24405;&#23646;&#20110;&#36890;&#29992;&#36923;&#36753;&#65292;&#24456;&#22810;&#25509;&#21475;&#37117;&#23558;&#29992;&#21040;&#65292;&#24212;&#35813;&#25226;&#23427;&#21333;&#29420;&#25552;&#21462;&#20986;&#26469;&#65292;&#20877;&#37197;&#32622;&#21040;&#35843;&#29992;handler&#20043;&#21069;&#65292;&#36825;&#23601;&#26159;filter&#30340;&#20316;&#29992;&#12290;</p>
<p>drogon&#26694;&#26550;&#20570;&#23436;URL&#36335;&#24452;&#21305;&#37197;&#21518;&#65292;&#20250;&#20808;&#20381;&#27425;&#35843;&#29992;&#27880;&#20876;&#21040;&#35813;&#36335;&#24452;&#19978;&#30340;&#36807;&#28388;&#22120;&#65292;&#21482;&#26377;&#24403;&#25152;&#26377;&#36807;&#28388;&#22120;&#37117;&#20801;&#35768;”&#36890;&#36807;”&#26102;&#65292;&#23545;&#24212;&#30340;handler&#25165;&#20250;&#34987;&#35843;&#29992;;</p>
<div class="section" id="id2">
<h2>&#20869;&#32622;&#36807;&#28388;&#22120;</h2>
<p>drogon&#20869;&#32622;&#20102;&#22914;&#19979;&#24120;&#29992;&#36807;&#28388;&#22120;:</p>
<blockquote>
<div><ul class="simple">
<li><em>drogon::IntranetIpFilter</em>: &#21482;&#25918;&#34892;&#20869;&#32593;ip&#21457;&#26469;&#30340;http&#35831;&#27714;&#65292;&#21542;&#21017;&#36820;&#22238;404&#39029;&#38754;&#65307;</li>
<li><em>drogon::LocalHostFilter</em>: &#21482;&#25918;&#34892;&#26412;&#26426;127.0.0.1&#25110;&#32773;::1&#21457;&#26469;&#30340;http&#35831;&#27714;&#65292;&#21542;&#21017;&#36820;&#22238;404&#39029;&#38754;&#65307;</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id3">
<h2>&#33258;&#23450;&#20041;&#36807;&#28388;&#22120;</h2>
<p>&#24403;&#28982;&#65292;&#29992;&#25143;&#21487;&#20197;&#33258;&#23450;&#20041;&#36807;&#28388;&#22120;&#65292;&#38656;&#35201;&#32487;&#25215;HttpFilter&#31867;&#27169;&#26495;&#65292;&#27169;&#26495;&#31867;&#22411;&#23601;&#26159;&#23376;&#31867;&#31867;&#22411;&#65292;&#27604;&#22914;&#25105;&#20204;&#24819;&#20570;&#19968;&#20010;LoginFilter&#65292;&#23601;&#21487;&#20197;&#23450;&#20041;&#22914;&#19979;:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LoginFilter</span><span class="o">:</span><span class="k">public</span> <span class="n">drogon</span><span class="o">::</span><span class="n">HttpFilter</span><span class="o">&lt;</span><span class="n">LoginFilter</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">doFilter</span><span class="p">(</span><span class="k">const</span> <span class="n">HttpRequestPtr</span> <span class="o">&amp;</span><span class="n">req</span><span class="p">,</span>
                        <span class="n">FilterCallback</span> <span class="o">&amp;&amp;</span><span class="n">fcb</span><span class="p">,</span>
                        <span class="n">FilterChainCallback</span> <span class="o">&amp;&amp;</span><span class="n">fccb</span><span class="p">)</span> <span class="k">override</span> <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>&#20320;&#21487;&#20197;&#36890;&#36807; drogon_ctl &#21629;&#20196;&#21019;&#24314;&#36807;&#28388;&#22120;, &#35265; drogon_ctl.</p>
<p>&#25105;&#20204;&#38656;&#35201;&#37325;&#36733;&#29238;&#31867;&#30340;doFilter&#34394;&#20989;&#25968;&#23454;&#29616;&#36807;&#28388;&#22120;&#36923;&#36753;&#65307;</p>
<p>&#36825;&#20010;&#34394;&#20989;&#25968;&#26377;&#19977;&#20010;&#21442;&#25968;&#65292;&#20998;&#21035;&#26159;&#65306;</p>
<blockquote>
<div><ul class="simple">
<li><em>req</em>: http&#35831;&#27714;&#65307;</li>
<li><em>fcb</em>: &#36807;&#28388;&#22120;&#22238;&#35843;&#20989;&#25968;&#65292;&#20989;&#25968;&#31867;&#22411;&#26159;void (HttpResponsePtr)&#65292;&#24403;&#36807;&#28388;&#22120;&#21028;&#23450;&#35831;&#27714;&#19981;&#21512;&#27861;&#26102;&#65292;&#36890;&#36807;&#36825;&#20010;&#22238;&#35843;&#25226;&#29305;&#23450;&#30340;&#21709;&#24212;&#36820;&#22238;&#32473;&#27983;&#35272;&#22120;&#65307;</li>
<li><em>fccb</em>: &#36807;&#28388;&#22120;&#38142;&#22238;&#35843;&#20989;&#25968;&#65292;&#20989;&#25968;&#31867;&#22411;&#26159;void ()&#65292;&#24403;&#36807;&#28388;&#22120;&#21028;&#23450;&#35831;&#27714;&#21512;&#27861;&#26102;&#65292;&#36890;&#36807;&#36825;&#20010;&#22238;&#35843;&#21578;&#35785;drogon&#35843;&#29992;&#19979;&#19968;&#20010;&#36807;&#28388;&#22120;&#25110;&#32773;&#26368;&#32456;&#30340;handler</li>
</ul>
</div></blockquote>
<p>&#20855;&#20307;&#30340;&#23454;&#29616;&#21487;&#20197;&#21442;&#32771;drogon&#20869;&#32622;&#36807;&#28388;&#22120;&#30340;&#23454;&#29616;&#12290;</p>
</div>
<div class="section" id="id4">
<h2>&#36807;&#28388;&#22120;&#30340;&#27880;&#20876;</h2>
<p>&#36807;&#28388;&#22120;&#24635;&#26159;&#20276;&#38543;controller&#30340;&#27880;&#20876;&#36827;&#34892;&#65292;&#21069;&#38754;&#25552;&#21040;&#30340;&#27880;&#20876;handler&#30340;&#23439;(PATH_ADD,METHOD_ADD&#31561;)&#37117;&#21487;&#20197;&#22312;&#26368;&#21518;&#28155;&#21152;&#19968;&#20010;&#25110;&#22810;&#20010;&#36807;&#28388;&#22120;&#21517;&#23383;&#65307;&#27604;&#22914;&#65292;&#25105;&#20204;&#25226;&#21069;&#38754;getInfo&#26041;&#27861;&#30340;&#27880;&#20876;&#34892;&#25913;&#20026;&#22914;&#19979;&#24418;&#24335;&#65306;</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">METHOD_ADD</span><span class="p">(</span><span class="n">User</span><span class="o">::</span><span class="n">getInfo</span><span class="p">,</span><span class="s">&quot;/{1}/info?token={2}&quot;</span><span class="p">,</span><span class="n">Get</span><span class="p">,</span><span class="s">&quot;LoginFilter&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>&#21017;&#22312;&#36335;&#24452;&#21305;&#37197;&#25104;&#21151;&#21518;&#65292;&#24517;&#39035;&#28385;&#36275;&#22914;&#19979;&#26465;&#20214;&#65292;getInfo&#26041;&#27861;&#25165;&#20250;&#34987;&#35843;&#29992;&#65306;</p>
<blockquote>
<div><ol class="arabic simple">
<li>&#35831;&#27714;&#24517;&#39035;&#26159;http get&#35831;&#27714;&#65307;</li>
<li>&#35831;&#27714;&#26041;&#24517;&#39035;&#24050;&#32463;&#30331;&#24405;&#65307;</li>
</ol>
</div></blockquote>
<p>&#21487;&#20197;&#30475;&#21040;&#65292;&#36807;&#28388;&#22120;&#30340;&#37197;&#32622;&#21644;&#27880;&#20876;&#26159;&#38750;&#24120;&#31616;&#21333;&#30340;&#65292;&#27880;&#20876;&#36807;&#28388;&#22120;&#30340;controller&#25991;&#20214;&#24182;&#19981;&#38656;&#35201;&#24341;&#29992;&#36807;&#28388;&#22120;&#30340;&#22836;&#25991;&#20214;&#65292;&#36807;&#28388;&#22120;&#21644;&#25511;&#21046;&#22120;&#20063;&#26159;&#20805;&#20998;&#35299;&#32806;&#30340;&#12290;</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">&#27880;&#24847;: &#22914;&#26524;&#36807;&#28388;&#22120;&#23450;&#20041;&#22312;&#21629;&#21517;&#31354;&#38388;&#37324;&#65292;&#27880;&#20876;&#36807;&#28388;&#22120;&#26102;&#24517;&#39035;&#25226;&#21629;&#21517;&#31354;&#38388;&#20889;&#20840;</p>
</div>
</div>
</div>


      </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, an-tao.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.
    </div>
  </body>
</html>