{"parents": [{"link": "../index-zh/", "title": "\u4e2d\u6587\u6587\u6863"}], "prev": {"link": "../AOP-Aspect-Oriented-Programming-zh/", "title": "AOP\u9762\u5411\u5207\u9762\u7f16\u7a0b"}, "next": {"link": "../Coz-zh/", "title": "Coz"}, "title": "\u6027\u80fd\u6d4b\u8bd5", "meta": {}, "body": "<div class=\"section\" id=\"id1\">\n<h1>\u6027\u80fd\u6d4b\u8bd5<a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>\u4f5c\u4e3aC++\u7684Http\u5e94\u7528\u6846\u67b6\uff0c\u6027\u80fd\u5e94\u8be5\u662f\u5173\u6ce8\u7684\u91cd\u70b9\u4e4b\u4e00\uff0c\u672c\u8282\u4ecb\u7ecdDrogon\u7684\u7b80\u5355\u6d4b\u8bd5\u548c\u6210\u7ee9\uff1b</p>\n<div class=\"section\" id=\"id2\">\n<h2>\u6d4b\u8bd5\u73af\u5883<a class=\"headerlink\" href=\"#id2\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<blockquote>\n<div><ul class=\"simple\">\n<li>\u7cfb\u7edf\u662fLinux CentOS 7.4\uff1b</li>\n<li>\u8bbe\u5907\u662fDell\u670d\u52a1\u5668\uff0cCPU\u662f\u4e24\u9897Intel(R) Xeon(R) CPU E5-2670 &#64; 2.60GHz\uff0c16\u683832\u7ebf\u7a0b\uff1b</li>\n<li>\u5185\u5b5864GB\uff1b</li>\n<li>gcc\u7248\u672c7.3.0\uff1b</li>\n</ul>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"id3\">\n<h2>\u6d4b\u8bd5\u65b9\u6848\u548c\u7ed3\u679c<a class=\"headerlink\" href=\"#id3\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>\u6211\u4eec\u53ea\u662f\u4e3a\u4e86\u6d4b\u8bd5drogon\u6846\u67b6\u7684\u6027\u80fd\uff0c\u56e0\u800c\u8981\u5c3d\u91cf\u7b80\u5316controller\u7684\u5904\u7406\uff0c\u6211\u4eec\u53ea\u505a\u4e86\u4e00\u4e2aHttpSimpleController\uff0c\u6ce8\u518c\u5230*/benchmark*\u8def\u5f84\u4e0a\u3002controller\u5bf9\u4efb\u4f55\u8bf7\u6c42\u90fd\u8fd4\u56de*&lt;p&gt;Hello, world!&lt;/p&gt;*\u3002\u8bbe\u7f6edrogon\u7ebf\u7a0b\u6570\u4e3a16\u3002handler\u51fd\u6570\u7684\u4ee3\u7801\u5982\u4e0b, \u4f60\u53ef\u4ee5\u5728*drogon/examples/benchmark*\u76ee\u5f55\u627e\u5230\u8fd9\u4e9b\u6e90\u7801\uff1a</p>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kt\">void</span> <span class=\"n\">BenchmarkCtrl</span><span class=\"o\">::</span><span class=\"n\">asyncHandleHttpRequest</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpRequestPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">function</span><span class=\"o\">&lt;</span><span class=\"kt\">void</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpResponsePtr</span> <span class=\"o\">&amp;</span><span class=\"p\">)</span><span class=\"o\">&gt;</span> <span class=\"o\">&amp;&amp;</span><span class=\"n\">callback</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"c1\">//write your application logic here</span>\n    <span class=\"k\">auto</span> <span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"n\">HttpResponse</span><span class=\"o\">::</span><span class=\"n\">newHttpResponse</span><span class=\"p\">();</span>\n    <span class=\"n\">resp</span><span class=\"o\">-&gt;</span><span class=\"n\">setBody</span><span class=\"p\">(</span><span class=\"s\">&quot;&lt;p&gt;Hello, world!&lt;/p&gt;&quot;</span><span class=\"p\">);</span>\n    <span class=\"n\">resp</span><span class=\"o\">-&gt;</span><span class=\"n\">setExpiredTime</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">);</span>\n    <span class=\"n\">callback</span><span class=\"p\">(</span><span class=\"n\">resp</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n<p>\u4f5c\u4e3a\u5bf9\u6bd4\uff0c\u6211\u9009\u53d6\u4e86nginx\u6765\u505a\u5bf9\u6bd4\u6d4b\u8bd5\uff0c\u4f7f\u7528nginx+module\u6e90\u7801\u7f16\u8bd1\u7684\u65b9\u5f0f\uff0c\u5199\u4e86\u4e00\u4e2ahello_world_module\uff0c\u6d4b\u8bd5\u65f6nginx\u7684worker_processes\u53c2\u6570\u8bbe\u4e3a16\u3002</p>\n<p>\u6d4b\u8bd5\u5de5\u5177\u662f\u4e00\u4e2a\u6027\u80fd\u4e0d\u9519\u7684HTTP\u538b\u529b\u6d4b\u8bd5\u5de5\u5177*httpress*\u3002</p>\n<p>\u6211\u4eec\u8c03\u6574httpress\u7684\u53c2\u6570\uff0c\u6bcf\u7ec4\u53c2\u6570\u6d4b\u8bd5\u4e94\u6b21\uff0c\u8bb0\u5f55\u6bcf\u79d2\u5904\u7406\u8bf7\u6c42\u6570\u7684\u6700\u5927\u503c\u548c\u6700\u5c0f\u503c\u3002\u6d4b\u8bd5\u7ed3\u679c\u5982\u4e0b\u8868\uff1a</p>\n<table border=\"1\" class=\"docutils\">\n<colgroup>\n<col width=\"30%\" />\n<col width=\"47%\" />\n<col width=\"11%\" />\n<col width=\"11%\" />\n</colgroup>\n<thead valign=\"bottom\">\n<tr class=\"row-odd\"><th class=\"head\">\u547d\u4ee4\u884c</th>\n<th class=\"head\">\u8bf4\u660e</th>\n<th class=\"head\">Drogon(\u5343QPS)</th>\n<th class=\"head\">nginx(\u5343QPS)</th>\n</tr>\n</thead>\n<tbody valign=\"top\">\n<tr class=\"row-even\"><td>httpress -c 100 -n 1000000 -t 16 -k -q URL</td>\n<td>100\u8fde\u63a5\uff0c100\u4e07\u8bf7\u6c42\uff0c16\u7ebf\u7a0b\uff0cKeep-Alive</td>\n<td>561/552</td>\n<td>330/329</td>\n</tr>\n<tr class=\"row-odd\"><td>httpress -c 100 -n 1000000 -t 12 -q URL</td>\n<td>100\u8fde\u63a5\uff0c100\u4e07\u8bf7\u6c42\uff0c12\u7ebf\u7a0b\uff0c\u4e00\u6b21\u8bf7\u6c42\u4e00\u6b21\u8fde\u63a5</td>\n<td>140/135</td>\n<td>31/49</td>\n</tr>\n<tr class=\"row-even\"><td>httpress -c 1000 -n 1000000 -t 16 -k -q URL</td>\n<td>1000\u8fde\u63a5\uff0c100\u4e07\u8bf7\u6c42\uff0c16\u7ebf\u7a0b\uff0cKeep-Alive</td>\n<td>573/565</td>\n<td>333/327</td>\n</tr>\n<tr class=\"row-odd\"><td>httpress -c 1000 -n 1000000 -t 16 -q URL</td>\n<td>1000\u8fde\u63a5\uff0c100\u4e07\u8bf7\u6c42\uff0c16\u7ebf\u7a0b\uff0c\u4e00\u6b21\u8bf7\u6c42\u4e00\u6b21\u8fde\u63a5</td>\n<td>155/143</td>\n<td>52/50</td>\n</tr>\n<tr class=\"row-even\"><td>httpress -c 10000 -n 4000000 -t 16 -k -q URL</td>\n<td>10000\u8fde\u63a5\uff0c400\u4e07\u8bf7\u6c42\uff0c16\u7ebf\u7a0b\uff0cKeep-Alive</td>\n<td>512/508</td>\n<td>316/314</td>\n</tr>\n<tr class=\"row-odd\"><td>httpress -c 10000 -n 1000000 -t 16 -q URL</td>\n<td>10000\u8fde\u63a5\uff0c100\u4e07\u8bf7\u6c42\uff0c16\u7ebf\u7a0b\uff0c\u4e00\u6b21\u8bf7\u6c42\u4e00\u6b21\u8fde\u63a5</td>\n<td>143/141</td>\n<td>43/40</td>\n</tr>\n</tbody>\n</table>\n<p>\u53ef\u4ee5\u770b\u5230\uff0c\u5728\u5ba2\u6237\u7aef\u4f7f\u7528Keep-Alive\u9009\u9879\uff0c\u5728\u4e00\u4e2a\u8fde\u63a5\u53ef\u4ee5\u53d1\u9001\u591a\u4e2a\u8bf7\u6c42\u7684\u60c5\u51b5\u4e0b\uff0cdrogon\u6bcf\u79d2\u53ef\u4ee5\u5904\u740650\u591a\u4e07\u6b21\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u6210\u7ee9\u662f\u76f8\u5f53\u4e0d\u9519\u7684\u3002\u6bcf\u6b21\u8bf7\u6c42\u90fd\u53d1\u8d77\u4e00\u6b21\u8fde\u63a5\u7684\u60c5\u51b5\u4e0b\uff0cCPU\u4f1a\u6d88\u8017\u5728TCP\u5efa\u7acb\u548c\u65ad\u5f00\u7b49\u73af\u8282\uff0c\u541e\u5410\u91cf\u4f1a\u4e0b\u964d\u81f3\u6bcf\u79d214\u4e07\u6b21\u8bf7\u6c42\uff0c\u8fd9\u4e5f\u662f\u6b63\u5e38\u7684\u3002drogon\u5bf9\u6bd4nginx\u7684\u6210\u7ee9\u5904\u4e8e\u660e\u663e\u4f18\u52bf\uff0c\u4e5f\u8bb8\u662f\u7531\u4e8enginx\u914d\u7f6e\u4e0d\u5f53\u672a\u80fd\u53d1\u6325\u5b83\u7684\u6700\u5927\u541e\u5410\u91cf\uff0c\u5982\u679c\u54ea\u4f4d\u9ad8\u624b\u505a\u4e86\u66f4\u597d\u7684\u6d4b\u8bd5\uff0c\u6b22\u8fce\u6307\u6b63\u3002</p>\n<p>\u4e0b\u56fe\u662f\u67d0\u4e00\u6b21\u6d4b\u8bd5\u7684\u622a\u56fe\uff1a</p>\n<p>\u6d4b\u8bd5\u622a\u56fe</p>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["Coz-zh", "Coz", "N", "next"], ["AOP-Aspect-Oriented-Programming-zh", "AOP\u9762\u5411\u5207\u9762\u7f16\u7a0b", "P", "previous"]], "sourcename": "Benchmarks-zh.rstd.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">\u6027\u80fd\u6d4b\u8bd5</a><ul>\n<li><a class=\"reference internal\" href=\"#id2\">\u6d4b\u8bd5\u73af\u5883</a></li>\n<li><a class=\"reference internal\" href=\"#id3\">\u6d4b\u8bd5\u65b9\u6848\u548c\u7ed3\u679c</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rstd", "current_page_name": "Benchmarks-zh", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}