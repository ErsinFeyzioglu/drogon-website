{"parents": [{"link": "../index-zh/", "title": "\u4e2d\u6587\u6587\u6863"}], "prev": {"link": "../Controller-WebSocketController-zh/", "title": "\u63a7\u5236\u5668 WebSocketController"}, "next": {"link": "../View-zh/", "title": "\u89c6\u56fe"}, "title": "\u8fc7\u6ee4\u5668", "meta": {}, "body": "<div class=\"section\" id=\"id1\">\n<h1>\u8fc7\u6ee4\u5668<a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>\u8fc7\u6ee4\u5668(filter)\u53ef\u4ee5\u5e2e\u52a9\u7528\u6237\u63d0\u9ad8\u7f16\u7a0b\u6548\u7387\uff0c\u5728HttpController\u7684\u4f8b\u5b50\u4e2d\uff0cgetInfo\u65b9\u6cd5\u5728\u8fd4\u56de\u7528\u6237\u4fe1\u606f\u4e4b\u524d\u5e94\u8be5\u5148\u6821\u9a8c\u7528\u6237\u662f\u5426\u767b\u5f55\uff0c\u6211\u4eec\u628a\u8fd9\u4e2a\u903b\u8f91\u5199\u5728getInfo\u65b9\u6cd5\u91cc\u5f53\u7136\u662f\u53ef\u4ee5\u7684\uff0c\u4f46\u662f\uff0c\u5f88\u663e\u7136\uff0c\u6821\u9a8c\u7528\u6237\u767b\u5f55\u5c5e\u4e8e\u901a\u7528\u903b\u8f91\uff0c\u5f88\u591a\u63a5\u53e3\u90fd\u5c06\u7528\u5230\uff0c\u5e94\u8be5\u628a\u5b83\u5355\u72ec\u63d0\u53d6\u51fa\u6765\uff0c\u518d\u914d\u7f6e\u5230\u8c03\u7528handler\u4e4b\u524d\uff0c\u8fd9\u5c31\u662ffilter\u7684\u4f5c\u7528\u3002</p>\n<p>drogon\u6846\u67b6\u505a\u5b8cURL\u8def\u5f84\u5339\u914d\u540e\uff0c\u4f1a\u5148\u4f9d\u6b21\u8c03\u7528\u6ce8\u518c\u5230\u8be5\u8def\u5f84\u4e0a\u7684\u8fc7\u6ee4\u5668\uff0c\u53ea\u6709\u5f53\u6240\u6709\u8fc7\u6ee4\u5668\u90fd\u5141\u8bb8\u201d\u901a\u8fc7\u201d\u65f6\uff0c\u5bf9\u5e94\u7684handler\u624d\u4f1a\u88ab\u8c03\u7528;</p>\n<div class=\"section\" id=\"id2\">\n<h2>\u5185\u7f6e\u8fc7\u6ee4\u5668<a class=\"headerlink\" href=\"#id2\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>drogon\u5185\u7f6e\u4e86\u5982\u4e0b\u5e38\u7528\u8fc7\u6ee4\u5668:</p>\n<blockquote>\n<div><ul class=\"simple\">\n<li><em>drogon::IntranetIpFilter</em>: \u53ea\u653e\u884c\u5185\u7f51ip\u53d1\u6765\u7684http\u8bf7\u6c42\uff0c\u5426\u5219\u8fd4\u56de404\u9875\u9762\uff1b</li>\n<li><em>drogon::LocalHostFilter</em>: \u53ea\u653e\u884c\u672c\u673a127.0.0.1\u6216\u8005::1\u53d1\u6765\u7684http\u8bf7\u6c42\uff0c\u5426\u5219\u8fd4\u56de404\u9875\u9762\uff1b</li>\n</ul>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"id3\">\n<h2>\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668<a class=\"headerlink\" href=\"#id3\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>\u5f53\u7136\uff0c\u7528\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668\uff0c\u9700\u8981\u7ee7\u627fHttpFilter\u7c7b\u6a21\u677f\uff0c\u6a21\u677f\u7c7b\u578b\u5c31\u662f\u5b50\u7c7b\u7c7b\u578b\uff0c\u6bd4\u5982\u6211\u4eec\u60f3\u505a\u4e00\u4e2aLoginFilter\uff0c\u5c31\u53ef\u4ee5\u5b9a\u4e49\u5982\u4e0b:</p>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span> <span class=\"nc\">LoginFilter</span><span class=\"o\">:</span><span class=\"k\">public</span> <span class=\"n\">drogon</span><span class=\"o\">::</span><span class=\"n\">HttpFilter</span><span class=\"o\">&lt;</span><span class=\"n\">LoginFilter</span><span class=\"o\">&gt;</span>\n<span class=\"p\">{</span>\n<span class=\"k\">public</span><span class=\"o\">:</span>\n    <span class=\"k\">virtual</span> <span class=\"kt\">void</span> <span class=\"n\">doFilter</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">HttpRequestPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">req</span><span class=\"p\">,</span>\n                        <span class=\"n\">FilterCallback</span> <span class=\"o\">&amp;&amp;</span><span class=\"n\">fcb</span><span class=\"p\">,</span>\n                        <span class=\"n\">FilterChainCallback</span> <span class=\"o\">&amp;&amp;</span><span class=\"n\">fccb</span><span class=\"p\">)</span> <span class=\"k\">override</span> <span class=\"p\">;</span>\n<span class=\"p\">};</span>\n</pre></div>\n</div>\n<p>\u4f60\u53ef\u4ee5\u901a\u8fc7 drogon_ctl \u547d\u4ee4\u521b\u5efa\u8fc7\u6ee4\u5668, \u89c1 drogon_ctl.</p>\n<p>\u6211\u4eec\u9700\u8981\u91cd\u8f7d\u7236\u7c7b\u7684doFilter\u865a\u51fd\u6570\u5b9e\u73b0\u8fc7\u6ee4\u5668\u903b\u8f91\uff1b</p>\n<p>\u8fd9\u4e2a\u865a\u51fd\u6570\u6709\u4e09\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\uff1a</p>\n<blockquote>\n<div><ul class=\"simple\">\n<li><em>req</em>: http\u8bf7\u6c42\uff1b</li>\n<li><em>fcb</em>: \u8fc7\u6ee4\u5668\u56de\u8c03\u51fd\u6570\uff0c\u51fd\u6570\u7c7b\u578b\u662fvoid (HttpResponsePtr)\uff0c\u5f53\u8fc7\u6ee4\u5668\u5224\u5b9a\u8bf7\u6c42\u4e0d\u5408\u6cd5\u65f6\uff0c\u901a\u8fc7\u8fd9\u4e2a\u56de\u8c03\u628a\u7279\u5b9a\u7684\u54cd\u5e94\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\uff1b</li>\n<li><em>fccb</em>: \u8fc7\u6ee4\u5668\u94fe\u56de\u8c03\u51fd\u6570\uff0c\u51fd\u6570\u7c7b\u578b\u662fvoid ()\uff0c\u5f53\u8fc7\u6ee4\u5668\u5224\u5b9a\u8bf7\u6c42\u5408\u6cd5\u65f6\uff0c\u901a\u8fc7\u8fd9\u4e2a\u56de\u8c03\u544a\u8bc9drogon\u8c03\u7528\u4e0b\u4e00\u4e2a\u8fc7\u6ee4\u5668\u6216\u8005\u6700\u7ec8\u7684handler</li>\n</ul>\n</div></blockquote>\n<p>\u5177\u4f53\u7684\u5b9e\u73b0\u53ef\u4ee5\u53c2\u8003drogon\u5185\u7f6e\u8fc7\u6ee4\u5668\u7684\u5b9e\u73b0\u3002</p>\n</div>\n<div class=\"section\" id=\"id4\">\n<h2>\u8fc7\u6ee4\u5668\u7684\u6ce8\u518c<a class=\"headerlink\" href=\"#id4\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>\u8fc7\u6ee4\u5668\u603b\u662f\u4f34\u968fcontroller\u7684\u6ce8\u518c\u8fdb\u884c\uff0c\u524d\u9762\u63d0\u5230\u7684\u6ce8\u518chandler\u7684\u5b8f(PATH_ADD,METHOD_ADD\u7b49)\u90fd\u53ef\u4ee5\u5728\u6700\u540e\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u8fc7\u6ee4\u5668\u540d\u5b57\uff1b\u6bd4\u5982\uff0c\u6211\u4eec\u628a\u524d\u9762getInfo\u65b9\u6cd5\u7684\u6ce8\u518c\u884c\u6539\u4e3a\u5982\u4e0b\u5f62\u5f0f\uff1a</p>\n<div class=\"highlight-cpp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">METHOD_ADD</span><span class=\"p\">(</span><span class=\"n\">User</span><span class=\"o\">::</span><span class=\"n\">getInfo</span><span class=\"p\">,</span><span class=\"s\">&quot;/{1}/info?token={2}&quot;</span><span class=\"p\">,</span><span class=\"n\">Get</span><span class=\"p\">,</span><span class=\"s\">&quot;LoginFilter&quot;</span><span class=\"p\">);</span>\n</pre></div>\n</div>\n<p>\u5219\u5728\u8def\u5f84\u5339\u914d\u6210\u529f\u540e\uff0c\u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff0cgetInfo\u65b9\u6cd5\u624d\u4f1a\u88ab\u8c03\u7528\uff1a</p>\n<blockquote>\n<div><ol class=\"arabic simple\">\n<li>\u8bf7\u6c42\u5fc5\u987b\u662fhttp get\u8bf7\u6c42\uff1b</li>\n<li>\u8bf7\u6c42\u65b9\u5fc5\u987b\u5df2\u7ecf\u767b\u5f55\uff1b</li>\n</ol>\n</div></blockquote>\n<p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fc7\u6ee4\u5668\u7684\u914d\u7f6e\u548c\u6ce8\u518c\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u6ce8\u518c\u8fc7\u6ee4\u5668\u7684controller\u6587\u4ef6\u5e76\u4e0d\u9700\u8981\u5f15\u7528\u8fc7\u6ee4\u5668\u7684\u5934\u6587\u4ef6\uff0c\u8fc7\u6ee4\u5668\u548c\u63a7\u5236\u5668\u4e5f\u662f\u5145\u5206\u89e3\u8026\u7684\u3002</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">\u6ce8\u610f: \u5982\u679c\u8fc7\u6ee4\u5668\u5b9a\u4e49\u5728\u547d\u540d\u7a7a\u95f4\u91cc\uff0c\u6ce8\u518c\u8fc7\u6ee4\u5668\u65f6\u5fc5\u987b\u628a\u547d\u540d\u7a7a\u95f4\u5199\u5168</p>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["View-zh", "\u89c6\u56fe", "N", "next"], ["Controller-WebSocketController-zh", "\u63a7\u5236\u5668 WebSocketController", "P", "previous"]], "sourcename": "Filter-zh.rstd.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">\u8fc7\u6ee4\u5668</a><ul>\n<li><a class=\"reference internal\" href=\"#id2\">\u5185\u7f6e\u8fc7\u6ee4\u5668</a></li>\n<li><a class=\"reference internal\" href=\"#id3\">\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668</a></li>\n<li><a class=\"reference internal\" href=\"#id4\">\u8fc7\u6ee4\u5668\u7684\u6ce8\u518c</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rstd", "current_page_name": "Filter-zh", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}